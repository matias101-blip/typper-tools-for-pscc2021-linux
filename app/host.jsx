if (typeof jamActions !== "object") {var jamActions = {};(function() {jamActions.isActionsFile = function(e) {return e.type === "8BAC" || e.name.match(/\.atn$/i);};jamActions.isActionsPalette = function(e) {return e.type === "8BPF" && e.name.match(/^Actions Palette$/i) || e.name.match(/^Actions Palette.psp$/i);};function l(e, a) {var t = e.read(a);var r = 0;for (var n = 0; n < a; n++) {r = (r << 8) + t.charCodeAt(n);}return r;}function o(e, a) {return e.read(a);}function u(e) {var a = l(e, 4);return o(e, a);}function p(e) {var a = "";var t = l(e, 4);for (var r = 0; r < t; r++) {var n = l(e, 2);if (n !== 0) {a += String.fromCharCode(n);}}return a;}function f(e) {var a = 0;var t = o(e, 4);switch (t) {case "TEXT":a = app.stringIDToTypeID(u(e));break;case "long":a = app.charIDToTypeID(o(e, 4));break;default:throw new Error("[jamActions readEventId] Unrecognized event type: '" + t + "'");break;}return a;}function s(e) {e.seek(8, 1);}function c(e, a) {e.seek(a * 8, 1);}function m(e) {e.seek(1, 1);}function e(e) {e.seek(2, 1);}function g(e) {e.seek(4, 1);}function y(e) {e.seek(8, 1);}function d(e, a) {e.seek(a, 1);}function h(e) {var a = l(e, 4);d(e, a);}function v(e) {var a = l(e, 4);d(e, a * 2);}function b(e) {var a = l(e, 4);if (a) {d(e, a);} else {d(e, 4);}}function k(e) {v(e);b(e);}function T(e) {k(e);var a = l(e, 4);for (var t = 0; t < a; t++) {b(e);r(e);}}function j(e) {var a = l(e, 4);for (var t = 0; t < a; t++) {r(e);}}function r(e) {var a = o(e, 4);switch (a) {case "obj ":S(e);break;case "Objc":case "GlbO":T(e);break;case "type":case "GlbC":k(e);break;case "VlLs":j(e);break;case "doub":s(e);break;case "UntF":d(e, 4);s(e);break;case "TEXT":v(e);break;case "enum":b(e);b(e);break;case "long":g(e);break;case "comp":y(e);break;case "bool":m(e);break;case "alis":h(e);break;case "Pth ":h(e);break;case "tdta":h(e);break;case "ObAr":var t = l(e, 4);k(e);var r = l(e, 4);for (var n = 0; n < r; n++) {b(e);g(e);g(e);var i = l(e, 4);c(e, i);}break;default:throw new Error("[jamActions skipItem] Unrecognized item type: '" + a + "'");break;}}function S(e) {var a = l(e, 4);for (var t = 0; t < a; t++) {var r = o(e, 4);k(e);switch (r) {case "Clss":break;case "prop":b(e);break;case "Enmr":b(e);b(e);break;case "rele":g(e);break;case "Idnt":g(e);break;case "indx":g(e);break;case "name":v(e);break;default:throw new Error("[jamActions skipReference] Unrecognized item form: '" + r + "'");break;}}}jamActions.readActionDescriptor = function(e, a) {var t = "\0\0\0";var r = e.tell();if (!a) {if (e.read(4) === t) {t = "";} else {throw new Error("[jamActions.readActionDescriptor] Unrecognized version prefix");}}T(e);var n = e.tell();e.seek(r, 0);var i = t + e.read(n - r);var o = new ActionDescriptor();o.fromStream(i);return o;};jamActions.dataFromActionsFile = function(e, a) {var c = this;function t(e) {var a = {};a.name = localize(p(e));a.expanded = l(e, 1) !== 0;var t = l(e, 4);a.actions = [];for (var r = 0; r < t; r++) {var n = {};n.functionKey = l(e, 2);n.shiftKey = l(e, 1) !== 0;n.commandKey = l(e, 1) !== 0;n.colorIndex = l(e, 2);n.name = localize(p(e));n.expanded = l(e, 1) !== 0;var i = l(e, 4);n.commands = [];for (var o = 0; o < i; o++) {var s = {};s.expanded = l(e, 1) !== 0;s.enabled = l(e, 1) !== 0;s.withDialog = l(e, 1) !== 0;s.dialogOptions = l(e, 1);s.eventId = f(e);s.dictionaryName = u(e);if (l(e, 4) !== 0) {s.actionDescriptor = c.readActionDescriptor(e, true);}n.commands.push(s);}a.actions.push(n);}return a;}var r;if (typeof e === "string") {r = new File(e);} else if (e instanceof File) {r = e;} else {throw new Error("[jamActions.dataFromActionsFile] Invalid argument");}var n;if (r.open("r")) {try {r.encoding = "BINARY";var i = l(r, 4);if (i === 16) {n = {};n.version = i;if (a) {n.actionSets = [];var o = l(r, 4);for (var s = 0; s < o; s++) {n.actionSets.push(t(r));}} else {n.actionSet = t(r);}} else {n = "Unsupported actions file version: " + i;}} catch (e) {n = e.message;} finally {r.close();}} else {n = "Cannot open file";}return n;};jamActions.isLocalPlayCommand = function(e, a) {var t = null;if (e.eventId === app.stringIDToTypeID("play")) {var r = app.stringIDToTypeID("target");if (e.actionDescriptor.hasKey(r)) {var n = e.actionDescriptor.getReference(r);do {try {var i = n.getDesiredClass();} catch (e) {break;}switch (i) {case app.stringIDToTypeID("command"):var o = n.getIndex() - 1;break;case app.stringIDToTypeID("action"):var s = n.getName();break;case app.stringIDToTypeID("actionSet"):var c = n.getName();break;}n = n.getContainer();} while (n);}var l = app.stringIDToTypeID("continue");if (e.actionDescriptor.hasKey(l)) {var u = e.actionDescriptor.getBoolean(l);}if (typeof c !== "undefined" && c === a) {t = [ s, o, u ];}}return t;};jamActions.determineDialogMode = function(e) {var a;switch (e.dialogOptions) {case 0:a = e.withDialog ? DialogModes.ALL : DialogModes.NO;break;case 2:a = DialogModes.NO;break;case 1:case 3:a = DialogModes.ALL;break;}return a;};var I = null;jamActions.setCommandHandler = function(e) {I = e;};jamActions.traverseAction = function(e, a, r, n) {function t(e) {var a = n ? e.length : r + 1;for (var t = r; t < a; t++) {if (I !== null) {I(e[t]);}}}if (typeof r === "undefined") {r = 0;n = true;}var i = e.actions;if (typeof a === "string") {var o = a;for (var s = 0; s < i.length; s++) {var c = i[s];if (c.name === o) {t(c.commands);break;}}} else if (typeof a === "number") {var s = a;if (s >= 0 && s < i.length) {t(i[s].commands);}}};})();}if (typeof jamEngine !== "object") {var jamEngine = {};(function() {var b;jamEngine.meaningfulIds = false;jamEngine.parseFriendly = false;jamEngine.displayDialogs = DialogModes.ERROR;var r = {"'Algn'": [ "align", "alignment" ],"'AntA'": [ "antiAlias", "antiAliasedPICTAcquire" ],"'BckL'": [ "backgroundLayer", "backgroundLevel" ],"'BlcG'": [ "blackGenerationType", "blackGenerationCurve" ],"'BlcL'": [ "blackLevel", "blackLimit" ],"'Blks'": [ "blacks", "blocks" ],"'BlrM'": [ "blurMethod", "blurMore" ],"'BrgC'": [ "brightnessEvent", "brightnessContrast" ],"'BrsD'": [ "brushDetail", "brushesDefine" ],"'Brsh'": [ "brush", "brushes" ],"'Clcl'": [ "calculation", "calculations" ],"'ClrP'": [ "colorPalette", "coloredPencil" ],"'Cnst'": [ "constant", "constrain" ],"'CntC'": [ "centerCropMarks", "conteCrayon" ],"'Cntr'": [ "center", "contrast" ],"'CrtD'": [ "createDroplet", "createDuplicate" ],"'CstP'": [ "customPalette", "customPhosphors" ],"'Cstm'": [ "custom", "customPattern" ],"'Drkn'": [ "darken", "darkness" ],"'Dstr'": [ "distort", "distortion", "distribute", "distribution" ],"'Dstt'": [ "desaturate", "destWhiteMax" ],"'FlIn'": [ "fileInfo", "fillInverse" ],"'Gd  '": [ "good", "guide" ],"'GnrP'": [ "generalPreferences", "generalPrefs", "preferencesClass" ],"'GrSt'": [ "grainStippled", "graySetup" ],"'Grdn'": [ "gradientClassEvent", "gridMinor" ],"'Grn '": [ "grain", "green" ],"'Grns'": [ "graininess", "greens" ],"'HstP'": [ "historyPreferences", "historyPrefs" ],"'HstS'": [ "historyState", "historyStateSourceType" ],"'ImgP'": [ "imageCachePreferences", "imagePoint" ],"'In  '": [ "in", "stampIn" ],"'IntW'": [ "interfaceWhite", "intersectWith" ],"'Intr'": [ "interfaceIconFrameDimmed", "interlace", "interpolation", "intersect" ],"'JPEG'": [ "JPEG", "JPEGFormat" ],"'LghD'": [ "lightDirection", "lightDirectional" ],"'LghO'": [ "lightOmni", "lightenOnly" ],"'LghS'": [ "lightSource", "lightSpot" ],"'Lns '": [ "lens", "lines" ],"'Mgnt'": [ "magenta", "magentas" ],"'MrgL'": [ "mergeLayers", "mergedLayers" ],"'Mxm '": [ "maximum", "maximumQuality" ],"'NTSC'": [ "NTSC", "NTSCColors" ],"'NmbL'": [ "numberOfLayers", "numberOfLevels" ],"'PlgP'": [ "pluginPicker", "pluginPrefs" ],"'Pncl'": [ "pencilEraser", "pencilWidth" ],"'Pnt '": [ "paint", "point" ],"'Prsp'": [ "perspective", "perspectiveIndex" ],"'PrvM'": [ "previewMacThumbnail", "previewMagenta" ],"'Pstr'": [ "posterization", "posterize" ],"'RGBS'": [ "RGBSetup", "RGBSetupSource" ],"'Rds '": [ "radius", "reds" ],"'ScrD'": [ "scratchDisks", "screenDot" ],"'ShdI'": [ "shadingIntensity", "shadowIntensity" ],"'ShpC'": [ "shapeCurveType", "shapingCurve" ],"'ShrE'": [ "sharpenEdges", "shearEd" ],"'Shrp'": [ "sharpen", "sharpness" ],"'SplC'": [ "splitChannels", "supplementalCategories" ],"'Spot'": [ "spot", "spotColor" ],"'SprS'": [ "separationSetup", "sprayedStrokes" ],"'StrL'": [ "strokeLength", "strokeLocation" ],"'Strt'": [ "saturation", "start" ],"'TEXT'": [ "char", "textType" ],"'TIFF'": [ "TIFF", "TIFFFormat" ],"'TglO'": [ "toggleOptionsPalette", "toggleOthers" ],"'TrnG'": [ "transparencyGamutPreferences", "transparencyGrid", "transparencyGridSize" ],"'TrnS'": [ "transferSpec", "transparencyShape", "transparencyStop" ],"'Trns'": [ "transparency", "transparent" ],"'TxtC'": [ "textClickPoint", "textureCoverage" ],"'TxtF'": [ "textureFile", "textureFill" ],"'UsrM'": [ "userMaskEnabled", "userMaskOptions" ],"'c@#^'": [ "inherits", "pInherits" ],"'comp'": [ "comp", "sInt64" ],"'doub'": [ "floatType", "IEEE64BitFloatingPoint", "longFloat" ],"'long'": [ "integer", "longInteger", "sInt32" ],"'magn'": [ "magnitude", "uInt32" ],"'null'": [ "null", "target" ],"'shor'": [ "sInt16", "sMInt", "shortInteger" ],"'sing'": [ "IEEE32BitFloatingPoint", "sMFloat", "shortFloat" ]};jamEngine.getConflictingStringIdStrs = function(e) {return r[e] || null;};jamEngine.uniIdStrToId = function(e) {var a = 0;if (typeof e === "string") {if (e.length === 1 + 4 + 1 && e.charAt(0) === "'" && e.charAt(5) === "'") {a = app.charIDToTypeID(e.substring(1, 5));} else {a = app.stringIDToTypeID(e);}}return a;};var l = app.charIDToTypeID("    ");jamEngine.idToUniIdStrs = function(e) {var a = "";var t = app.typeIDToStringID(e);if (e >= l) {a = "'" + app.typeIDToCharID(e) + "'";if (t !== "") {if (a in r) {t = r[a];}}}return [ a, t ];};jamEngine.equivalentUniIdStrs = function(e, a) {return this.uniIdStrToId(e) === this.uniIdStrToId(a);};function g(e, a) {if (a.constructor === Array) {var t = a.length;for (var r = 0; r < t; r++) {var n = b.parseCompact(a[r]);var i = b.uniIdStrToId(n[0]);var o = b.parseCompact(n[1]);var s = o[0];var c = o[1];switch (s) {case "<class>":e.putClass(i);break;case "<enumerated>":var l = b.parseCompact(c);e.putEnumerated(i, b.uniIdStrToId(l[0]), b.uniIdStrToId(l[1]));break;case "<identifier>":e.putIdentifier(i, c);break;case "<index>":e.putIndex(i, c);break;case "<name>":e.putName(i, c);break;case "<offset>":e.putOffset(i, c);break;case "<property>":e.putProperty(i, b.uniIdStrToId(c));break;default:throw new Error("[jamEngine putInReference] Unknown reference form: " + s);break;}}} else {throw new Error("[jamEngine putInReference] JavaScript array expected");}}function y(e, a) {if (a.constructor === Array) {var t = a.length;for (var r = 0; r < t; r++) {var n = b.parseCompact(a[r]);var i = n[0];var o = n[1];switch (i) {case "<boolean>":e.putBoolean(o);break;case "<class>":e.putClass(b.uniIdStrToId(o));break;case "<data>":e.putData(o);break;case "<double>":e.putDouble(o);break;case "<enumerated>":var s = b.parseCompact(o);e.putEnumerated(b.uniIdStrToId(s[0]), b.uniIdStrToId(s[1]));break;case "<integer>":e.putInteger(o);break;case "<largeInteger>":e.putLargeInteger(o);break;case "<list>":var c = new ActionList();y(c, o);e.putList(c);break;case "<object>":var l = b.parseCompact(o);if (l[1]) {var u = new ActionDescriptor();d(u, l[1]);e.putObject(b.uniIdStrToId(l[0]), u);} else {e.putClass(b.uniIdStrToId(l[0]));}break;case "<path>":var p = new File(o);e.putPath(p);break;case "<reference>":var f = new ActionReference();g(f, o);e.putReference(f);break;case "<string>":e.putString(o);break;case "<unitDouble>":var m = b.parseCompact(o);e.putUnitDouble(b.uniIdStrToId(m[0]), m[1]);break;default:throw new Error("[jamEngine putInList] Unknown list type: " + i);break;}}} else {throw new Error("[jamEngine putInList] JavaScript array expected");}}function d(e, a) {if (a.constructor === Object) {for (var t in a) {if (a.hasOwnProperty(t)) {var r = b.uniIdStrToId(t);var n = b.parseCompact(a[t]);var i = n[0];var o = n[1];switch (i) {case "<boolean>":e.putBoolean(r, o);break;case "<class>":e.putClass(r, b.uniIdStrToId(o));break;case "<data>":e.putData(r, o);break;case "<double>":e.putDouble(r, o);break;case "<enumerated>":var s = b.parseCompact(o);e.putEnumerated(r, b.uniIdStrToId(s[0]), b.uniIdStrToId(s[1]));break;case "<integer>":e.putInteger(r, o);break;case "<largeInteger>":e.putLargeInteger(r, o);break;case "<list>":var c = new ActionList();y(c, o);e.putList(r, c);break;case "<object>":var l = b.parseCompact(o);if (l[1]) {var u = new ActionDescriptor();d(u, l[1]);e.putObject(r, b.uniIdStrToId(l[0]), u);} else {e.putClass(r, b.uniIdStrToId(l[0]));}break;case "<path>":var p = new File(o);e.putPath(r, p);break;case "<reference>":var f = new ActionReference();g(f, o);e.putReference(r, f);break;case "<string>":e.putString(r, o);break;case "<unitDouble>":var m = b.parseCompact(o);e.putUnitDouble(r, b.uniIdStrToId(m[0]), m[1]);break;default:throw new Error("[jamEngine putInDescriptor] Unknown descriptor type: " + i);break;}}}} else {throw new Error("[jamEngine putInDescriptor] JavaScript object expected");}}var u = {"'Algn'": {"<classKey>": {"bevelEmboss": "align","frameFX": "align","gradientFill": "align","gradientLayer": "align","patternFill": "align","patternLayer": "align"},"<event>": "align","<key>": "alignment"},"'AntA'": {"<class>": "antiAliasedPICTAcquire","<key>": "antiAlias"},"'BckL'": {"<class>": "backgroundLayer","<key>": "backgroundLevel"},"'BlcG'": {"<enumType>": "blackGenerationType","<key>": "blackGenerationCurve"},"'BlcL'": {"<classKey>": {"'GEfc'": "blackLevel","CMYKSetup": "blackLimit"},"<eventKey>": {"reticulation": "blackLevel"}},"'Blks'": {"<typeValue>": {"colors": "blacks","extrudeType": "blocks"}},"'BlrM'": {"<enumType>": "blurMethod","<event>": "blurMore","<key>": "blurMethod"},"'BrgC'": {"<class>": "brightnessContrast","<event>": "brightnessContrast"},"'BrsD'": {"<enumValue>": "brushesDefine","<key>": "brushDetail"},"'Brsh'": {"<class>": "brush","<classKey>": {"brushPreset": "brush","currentToolOptions": "brush","displayPrefs": "brush"},"<key>": "brushes"},"'Clcl'": {"<class>": "calculation","<enumValue>": "calculations","<key>": "calculation"},"'ClrP'": {"<typeValue>": {"'GEft'": "coloredPencil"},"<enumType>": "colorPalette","<event>": "coloredPencil"},"'Cnst'": {"<classKey>": {"channelMatrix": "constant"},"<unknown>": "constrain"},"'CntC'": {"<typeValue>": {"'GEft'": "conteCrayon"},"<event>": "conteCrayon","<key>": "centerCropMarks"},"'Cntr'": {"<classKey>": {"'GEfc'": "contrast","brightnessContrast": "contrast","document": "center","polygon": "center","quadrilateral": "center"},"<eventKey>": {"adaptCorrect": "contrast","brightnessEvent": "contrast","grain": "contrast","halftoneScreen": "contrast","sumie": "contrast","tornEdges": "contrast","waterPaper": "contrast"},"<enumValue>": "center"},"'CrtD'": {"<enumValue>": "createDuplicate","<event>": "createDroplet"},"'CstP'": {"<class>": "customPhosphors","<key>": "customPalette"},"'Cstm'": {"<enumValue>": "customPattern","<event>": "custom","<key>": "custom"},"'Drkn'": {"<enumValue>": "darken","<key>": "darkness"},"'Dstr'": {"<classKey>": {"'GEfc'": "distortion"},"<eventKey>": {"glass": "distortion","addNoise": "distribution"},"<enumType>": "distribution","<enumValue>": "distort","<event>": "distribute"},"'Dstt'": {"<enumValue>": "desaturate","<event>": "desaturate","<key>": "destWhiteMax"},"'FlIn'": {"<typeValue>": {"fillColor": "fillInverse","menuItemType": "fileInfo"},"<class>": "fileInfo","<key>": "fileInfo"},"'Gd  '": {"<class>": "guide","<enumValue>": "good"},"'GnrP'": {"<class>": "preferencesClass","<enumValue>": "generalPreferences","<key>": "generalPrefs"},"'GrSt'": {"<class>": "graySetup","<enumValue>": "grainStippled","<key>": "graySetup"},"'Grdn'": {"<class>": "gradientClassEvent","<event>": "gradientClassEvent","<key>": "gridMinor"},"'Grn '": {"<typeValue>": {"'GEft'": "grain"},"<classKey>": {"'GEfc'": "grain","RGBColor": "green","blackAndWhite": "green","channelMatrix": "green","channelMixer": "green"},"<eventKey>": {"blackAndWhite": "green","channelMixer": "green","filmGrain": "grain"},"<enumValue>": "green","<event>": "grain"},"'Grns'": {"<enumValue>": "greens","<key>": "graininess"},"'HstP'": {"<enumValue>": "historyPreferences","<key>": "historyPrefs"},"'HstS'": {"<class>": "historyState","<enumType>": "historyStateSourceType"},"'ImgP'": {"<class>": "imagePoint","<enumValue>": "imageCachePreferences"},"'In  '": {"<enumValue>": "stampIn","<key>": "in"},"'IntW'": {"<event>": "intersectWith","<key>": "interfaceWhite"},"'Intr'": {"<typeValue>": {"shapeOperation": "intersect"},"<classKey>": {"GIFFormat": "interlace","SaveForWeb": "interlace","application": "interfaceIconFrameDimmed","computedBrush": "interpolation","dBrush": "interpolation","gradientClassEvent": "interpolation","photoshopEPSFormat": "interpolation","sampledBrush": "interpolation"},"<eventKey>": {"convertMode": "interpolation","imageSize": "interpolation","transform": "interpolation"},"<event>": "intersect"},"'JPEG'": {"<class>": "JPEGFormat","<enumValue>": "JPEG"},"'LghD'": {"<enumType>": "lightDirection","<enumValue>": "lightDirectional","<key>": "lightDirection"},"'LghO'": {"<typeValue>": {"diffuseMode": "lightenOnly","lightType": "lightOmni"}},"'LghS'": {"<class>": "lightSource","<enumValue>": "lightSpot","<key>": "lightSource"},"'Lns '": {"<enumType>": "lens","<enumValue>": "lines","<key>": "lens"},"'Mgnt'": {"<typeValue>": {"channel": "magenta","colors": "magentas","guideGridColor": "magenta"},"<key>": "magenta"},"'MrgL'": {"<enumValue>": "mergedLayers","<event>": "mergeLayers"},"'Mxm '": {"<enumValue>": "maximumQuality","<event>": "maximum","<key>": "maximum"},"'NTSC'": {"<enumValue>": "NTSC","<event>": "NTSCColors"},"'NmbL'": {"<classKey>": {"'GEfc'": "numberOfLevels","document": "numberOfLayers"},"<eventKey>": {"cutout": "numberOfLevels"}},"'PlgP'": {"<class>": "pluginPrefs","<enumValue>": "pluginPicker","<key>": "pluginPrefs"},"'Pncl'": {"<enumValue>": "pencilEraser","<key>": "pencilWidth"},"'Pnt '": {"<typeValue>": {"textType": "point"},"<class>": "point","<event>": "paint"},"'Prsp'": {"<enumValue>": "perspective","<key>": "perspectiveIndex"},"'PrvM'": {"<enumValue>": "previewMagenta","<key>": "previewMacThumbnail"},"'Pstr'": {"<class>": "posterize","<event>": "posterize","<key>": "posterization"},"'RGBS'": {"<enumType>": "RGBSetupSource","<key>": "RGBSetup"},"'Rds '": {"<enumValue>": "reds","<key>": "radius"},"'ScrD'": {"<enumValue>": "screenDot","<key>": "scratchDisks"},"'ShdI'": {"<classKey>": {"'GEfc'": "shadowIntensity"},"<eventKey>": {"watercolor": "shadowIntensity"},"<unknown>": "shadingIntensity"},"'ShpC'": {"<classKey>": {"application": "shapingCurve"},"<class>": "shapingCurve","<key>": "shapeCurveType"},"'ShrE'": {"<event>": "sharpenEdges","<key>": "shearEd"},"'Shrp'": {"<event>": "sharpen","<key>": "sharpness"},"'SplC'": {"<event>": "splitChannels","<key>": "supplementalCategories"},"'Spot'": {"<enumValue>": "spotColor","<key>": "spot"},"'SprS'": {"<typeValue>": {"'GEft'": "sprayedStrokes"},"<enumValue>": "separationSetup","<event>": "sprayedStrokes"},"'StrL'": {"<enumType>": "strokeLocation","<key>": "strokeLength"},"'Strt'": {"<classKey>": {"currentToolOptions": "saturation","fileNamingRules": "start","HSBColorClass": "saturation","hueSatAdjustment": "saturation","hueSatAdjustmentV2": "saturation","lineClass": "start","range": "start","vibrance": "saturation"},"<eventKey>": {"replaceColor": "saturation","variations": "saturation","vibrance": "saturation"},"<enumValue>": "saturation"},"'TEXT'": {"<enumType>": "textType","<key>": "textType"},"'TIFF'": {"<class>": "TIFFFormat","<enumValue>": "TIFF"},"'TglO'": {"<enumValue>": "toggleOptionsPalette","<key>": "toggleOthers"},"'TrnG'": {"<classKey>": {"application": "transparencyGrid","transparencyPrefs": "transparencyGridSize"},"<enumType>": "transparencyGridSize","<enumValue>": "transparencyGamutPreferences"},"'TrnS'": {"<classKey>": {"bevelEmboss": "transparencyShape","dropShadow": "transparencyShape","innerGlow": "transparencyShape","innerShadow": "transparencyShape","outerGlow": "transparencyShape"},"<class>": "transparencyStop","<unknown>": "transferSpec"},"'Trns'": {"<enumValue>": "transparent","<key>": "transparency"},"'TxtC'": {"<classKey>": {"'GEfc'": "textureCoverage","textLayer": "textClickPoint"},"<eventKey>": {"underpainting": "textureCoverage"}},"'TxtF'": {"<event>": "textureFill","<key>": "textureFile"},"'UsrM'": {"<enumType>": "userMaskOptions","<key>": "userMaskEnabled"},"'null'": {"<class>": "null","<enumValue>": "null","<event>": "null","<key>": "target"}};function k(e, r) {var a;var t = e[0];var n = e[1];if (n < l) {a = app.typeIDToStringID(n);} else {a = "'" + app.typeIDToCharID(n) + "'";if (b.meaningfulIds) {if (a in u) {function i(e) {var a = "";for (var t in e) {if (e.hasOwnProperty(t)) {if (r[1] === b.uniIdStrToId(t)) {a = e[t];break;}}}return a;}var o = "";var s = u[a];if (r) {switch (t) {case "<key>":if (r[0] === "<class>" && "<classKey>" in s) {o = i(s["<classKey>"]);} else if (r[0] === "<event>" && "<eventKey>" in s) {o = i(s["<eventKey>"]);}break;case "<enumValue>":if (r[0] === "<enumType>" && "<typeValue>" in s) {o = i(s["<typeValue>"]);}break;}}if (o !== "") {a = o;} else if (t in s) {a = s[t];}} else {var c = app.typeIDToStringID(n);if (c !== "") {a = c;}}}}return a;}var v = "";var s = app.stringIDToTypeID("get");var c = app.stringIDToTypeID("target");var p = app.stringIDToTypeID("property");function T(e) {var a = 0;var t = [];do {try {var r = e.getDesiredClass();} catch (e) {break;}if (a !== 0) {var n = b.buildCompact("<property>", k([ "<key>", a ], [ "<class>", r ]));t.push(b.buildCompact(k([ "<class>", p ]), n));a = 0;}var i;var o = e.getForm();switch (o) {case ReferenceFormType.CLASSTYPE:i = b.buildCompact("<class>", null);break;case ReferenceFormType.ENUMERATED:var s = [ "<enumType>", e.getEnumeratedType() ];var c = [ "<enumValue>", e.getEnumeratedValue() ];i = b.buildCompact("<enumerated>", b.buildCompact(k(s), k(c, s)));break;case ReferenceFormType.IDENTIFIER:i = b.buildCompact("<identifier>", e.getIdentifier());break;case ReferenceFormType.INDEX:i = b.buildCompact("<index>", e.getIndex());break;case ReferenceFormType.NAME:i = b.buildCompact("<name>", e.getName());break;case ReferenceFormType.OFFSET:i = b.buildCompact("<offset>", e.getOffset());break;case ReferenceFormType.PROPERTY:if (r === p) {a = e.getProperty();} else {i = b.buildCompact("<property>", k([ "<key>", e.getProperty() ], [ "<class>", r ]));}break;default:throw new Error("[jamEngine getFromReference] Unknown reference form type: " + o);break;}if (r !== p) {t.push(b.buildCompact(k([ "<class>", r ]), i));}e = e.getContainer();} while (e);return t;}function j(e) {var a = [];var t = e.count;for (var r = 0; r < t; r++) {var n;var i;try {i = e.getType(r);} catch (e) {continue;}switch (i) {case DescValueType.BOOLEANTYPE:n = b.buildCompact("<boolean>", e.getBoolean(r));break;case DescValueType.CLASSTYPE:n = b.buildCompact("<class>", k([ "<class>", e.getClass(r) ]));break;case DescValueType.DOUBLETYPE:n = b.buildCompact("<double>", e.getDouble(r));break;case DescValueType.ENUMERATEDTYPE:var o = [ "<enumType>", e.getEnumerationType(r) ];var s = [ "<enumValue>", e.getEnumerationValue(r) ];n = b.buildCompact("<enumerated>", b.buildCompact(k(o), k(s, o)));break;case DescValueType.INTEGERTYPE:n = b.buildCompact("<integer>", e.getInteger(r));break;case DescValueType.LISTTYPE:n = b.buildCompact("<list>", j(e.getList(r)));break;case DescValueType.OBJECTTYPE:var c = [ "<class>", e.getObjectType(r) ];var l = e.getObjectValue(r);n = b.buildCompact("<object>", b.buildCompact(k(c), S(l, c)));break;case DescValueType.ALIASTYPE:try {var u = e.getPath(r);n = b.buildCompact("<path>", u.fsName);} catch (e) {n = b.buildCompact("<path>", v);}break;case DescValueType.REFERENCETYPE:n = b.buildCompact("<reference>", T(e.getReference(r)));break;case DescValueType.STRINGTYPE:n = b.buildCompact("<string>", e.getString(r));break;case DescValueType.UNITDOUBLE:var p = [ "<unit>", e.getUnitDoubleType(r) ];var f = e.getUnitDoubleValue(r);n = b.buildCompact("<unitDouble>", b.buildCompact(k(p), f));break;default:var m;var g;try {m = i === DescValueType.RAWTYPE;} catch (e) {}try {g = i === DescValueType.LARGEINTEGERTYPE;} catch (e) {}if (m) {n = b.buildCompact("<data>", e.getData(r));} else if (g) {n = b.buildCompact("<largeInteger>", e.getLargeInteger(r));} else {throw new Error("[jamEngine getFromList] Unknown descriptor value type: " + i);}break;}a[r] = n;}return a;}function S(e, a) {if (e) {var t = {};var r;try {r = e.count;} catch (e) {return null;}for (var n = 0; n < r; n++) {var i = e.getKey(n);var o = k([ "<key>", i ], a);var s;var c;try {c = e.getType(i);} catch (e) {continue;}switch (c) {case DescValueType.BOOLEANTYPE:s = b.buildCompact("<boolean>", e.getBoolean(i));break;case DescValueType.CLASSTYPE:s = b.buildCompact("<class>", k([ "<class>", e.getClass(i) ]));break;case DescValueType.DOUBLETYPE:s = b.buildCompact("<double>", e.getDouble(i));break;case DescValueType.ENUMERATEDTYPE:var l = [ "<enumType>", e.getEnumerationType(i) ];var u = [ "<enumValue>", e.getEnumerationValue(i) ];s = b.buildCompact("<enumerated>", b.buildCompact(k(l), k(u, l)));break;case DescValueType.INTEGERTYPE:s = b.buildCompact("<integer>", e.getInteger(i));break;case DescValueType.LISTTYPE:s = b.buildCompact("<list>", j(e.getList(i)));break;case DescValueType.OBJECTTYPE:var p = [ "<class>", e.getObjectType(i) ];var f = e.getObjectValue(i);s = b.buildCompact("<object>", b.buildCompact(k(p), S(f, p)));break;case DescValueType.ALIASTYPE:try {var m = e.getPath(i);s = b.buildCompact("<path>", m.fsName);} catch (e) {s = b.buildCompact("<path>", v);}break;case DescValueType.REFERENCETYPE:s = b.buildCompact("<reference>", T(e.getReference(i)));break;case DescValueType.STRINGTYPE:s = b.buildCompact("<string>", e.getString(i));break;case DescValueType.UNITDOUBLE:var g = [ "<unit>", e.getUnitDoubleType(i) ];var y = e.getUnitDoubleValue(i);s = b.buildCompact("<unitDouble>", b.buildCompact(k(g), y));break;default:var d;var h;try {d = c === DescValueType.RAWTYPE;} catch (e) {}try {h = c === DescValueType.LARGEINTEGERTYPE;} catch (e) {}if (d) {s = b.buildCompact("<data>", e.getData(i));} else if (h) {s = b.buildCompact("<largeInteger>", e.getLargeInteger(i));} else {throw new Error("[jamEngine getFromDescriptor] Unknown descriptor value type: " + c);}break;}t[o] = s;}return t;} else {return null;}}jamEngine.jsonToActionDescriptor = function(e) {b = this;var a;if (e) {a = new ActionDescriptor();d(a, e);}return a;};jamEngine.jsonToActionReference = function(e) {b = this;var a;if (e) {a = new ActionReference();g(a, e);}return a;};jamEngine.eventIdAndActionDescriptorToJson = function(e, a) {b = this;var t = [ "<event>", e ];return {"<event>": k(t),"<descriptor>": S(a, t)};};jamEngine.classIdAndActionDescriptorToJson = function(e, a) {b = this;var t = [ "<class>", e ];return {"<class>": k(t),"<descriptor>": S(a, t)};};jamEngine.actionReferenceToJson = function(e) {b = this;return T(e);};function f(e) {classId = 0;do {try {var a = e.getDesiredClass();} catch (e) {break;}if (a !== p) {classId = a;break;}e = e.getContainer();} while (e);return classId;}jamEngine.jsonPlay = function(e, a, t) {var r = this.uniIdStrToId(e);var n = this.jsonToActionDescriptor(a);var i;if (r === s) {var o = n.getReference(c);i = [ "<class>", f(o) ];} else {i = [ "<event>", r ];}return S(app.executeAction(r, n, t || this.displayDialogs), i);};jamEngine.jsonGet = function(e) {var a = this.jsonToActionReference(e);return S(app.executeActionGet(a), [ "<class>", f(a) ]);};jamEngine.normalizeJsonItem = function(e, a) {function v(e) {var a = b.parseCompact(e);var t = a[0];var r = a[1];var n;switch (t) {case "<boolean>":case "<data>":case "<double>":case "<identifier>":case "<index>":case "<integer>":case "<largeInteger>":case "<name>":case "<offset>":case "<path>":case "<string>":n = r;break;case "<class>":n = r && k([ "<class>", b.uniIdStrToId(r) ]);break;case "<enumerated>":var i = b.parseCompact(r);var o = [ "<enumType>", b.uniIdStrToId(i[0]) ];var s = [ "<enumValue>", b.uniIdStrToId(i[1]) ];n = b.buildCompact(k(o), k(s, o));break;case "<list>":n = [];for (var c = 0; c < r.length; c++) {n.push(v(r[c]));}break;case "<object>":var l = b.parseCompact(r);var u = [ "<class>", b.uniIdStrToId(l[0]) ];var p = l[1];var f;if (p === null) {f = null;} else {f = {};for (var m in p) {if (p.hasOwnProperty(m)) {var g = [ "<key>", b.uniIdStrToId(m) ];f[k(g, u)] = v(p[m]);}}}n = b.buildCompact(k(u), f);break;case "<property>":n = k([ "<key>", b.uniIdStrToId(r) ]);break;case "<reference>":n = [];for (var c = 0; c < r.length; c++) {var y = b.parseCompact(r[c]);n.push(b.buildCompact(k([ "<class>", b.uniIdStrToId(y[0]) ]), v(y[1])));}break;case "<unitDouble>":var d = b.parseCompact(r);var h = [ "<unit>", b.uniIdStrToId(d[0]) ];n = b.buildCompact(k(h), d[1]);break;default:throw new Error("[jamEngine.normalizeJsonItem] Unknown item type: " + t);break;}return b.buildCompact(t, n);}b = this;var t = this.meaningfulIds;var r = this.parseFriendly;if (a && a.constructor === Object) {if (typeof a.meaningfulIds !== "undefined") {this.meaningfulIds = a.meaningfulIds;}if (typeof a.parseFriendly !== "undefined") {this.parseFriendly = a.parseFriendly;}}var n = v(e);this.meaningfulIds = t;this.parseFriendly = r;return n;};function i(e) {var a = [];for (var t = 0; t < e.length; t++) {var r = e[t];var n = {};var i = r[0];var o = r[1][0];var s = r[1][1];switch (o) {case "<class>":case "<identifier>":case "<index>":case "<name>":case "<offset>":case "<property":n[i] = s;break;case "<enumerated>":n[i] = s[1];break;default:throw new Error("[jamEngine simplifyRef] Unexpected element form: " + o);break;}a.push(n);}return a;}function o(e, a) {var t;var r = e[0];var n = e[1];switch (r) {case "<boolean>":case "<class>":case "<data>":case "<double>":case "<integer>":case "<largeInteger>":case "<path>":case "<string>":t = n;break;case "<list>":t = m(n, a);break;case "<enumerated>":case "<unitDouble>":t = n[1];break;case "<object>":t = h(n[1], a);break;case "<reference>":t = i(n);break;default:throw new Error("[jamEngine simplifyItem] Unexpected item type: " + r);break;}return t;}function m(e, a) {var t = [];for (var r = 0; r < e.length; r++) {t.push(o(e[r], a));}return t;}function h(e, t) {var a = function(e, a) {return o(e[a], t);};var r = {};for (var n in e) {if (e.hasOwnProperty(n)) {var i = undefined;if (typeof t === "function") {i = t(e, n, a);}if (typeof i === "undefined") {i = o(e[n], t);}r[n] = i;}}return r;}jamEngine.simplifyObject = function(e, a) {return h(this.normalizeJsonItem(e, {"meaningfulIds": true,"parseFriendly": true})[1][1], a);};jamEngine.simplifyList = function(e, a) {return m(this.normalizeJsonItem(e, {"meaningfulIds": true,"parseFriendly": true})[1], a);};jamEngine.parseCompact = function(e) {var a = [];if (e.constructor === Object) {var t = [];for (var r in e) {if (e.hasOwnProperty(r)) {t.push(r);}}if (t.length === 1) {a[0] = t[0];a[1] = e[t[0]];} else {throw new Error("[jamEngine.parseCompact] Syntax error: " + e.toSource());}} else if (e.constructor === Array) {if (e.length === 2) {a[0] = e[0];a[1] = e[1];} else {throw new Error("[jamEngine.parseCompact] Syntax error: " + e.toSource());}} else {throw new Error("[jamEngine.parseCompact] JavaScript object or array expected");}return a;};jamEngine.compactToExplicit = function(e, a, t) {var r = {};var n = this.parseCompact(e);r[a || "<type>"] = n[0];r[t || "<value>"] = n[1];return r;};jamEngine.buildCompact = function(e, a) {var t;if (typeof e === "string") {if (this.parseFriendly) {t = [ e, a ];} else {t = {};t[e] = a;}} else {throw new Error("[jamEngine.buildCompact] String expected");}return t;};jamEngine.explicitToCompact = function(e, a, t) {var r;if (e.constructor === Object) {r = this.buildCompact(e[a || "<type>"], e[t || "<value>"]);} else {throw new Error("[jamEngine.explicitToCompact] JavaScript object expected");}return r;};for (var e in r) {if (r.hasOwnProperty(e)) {var a = r[e];for (var t = a.length - 1; t >= 0; t--) {var n = a[t];if (!(app.charIDToTypeID(e.substring(1, 5)) === app.stringIDToTypeID(n))) {a.splice(t, 1);}}if (a.length < 2) {delete r[e];}}}for (var e in u) {if (u.hasOwnProperty(e)) {if (e in r) {var I = u[e];for (var x in I) {if (I.hasOwnProperty(x)) {switch (x) {case "<class>":case "<event>":case "<enumType>":case "<enumValue>":case "<key>":case "<unknown>":if (app.charIDToTypeID(e.substring(1, 5)) != app.stringIDToTypeID(I[x])) {throw new Error("[jamEngine] " + '"' + e + '" and "' + I[x] + '" are not equivalent ID strings');}break;case "<classKey>":case "<eventKey>":case "<typeValue>":for (var E in I[x]) {if (I[x].hasOwnProperty(E)) {if (app.charIDToTypeID(e.substring(1, 5)) != app.stringIDToTypeID(I[x][E])) {throw new Error("[jamEngine] " + '"' + e + '" and "' + I[x][E] + '" are not equivalent ID strings');}}}break;}}}} else {delete u[e];}}}})();}if (typeof jamHelpers !== "object") {var jamHelpers = {};(function() {jamHelpers.toColorObject = function(e) {var a;if (e.constructor === Object) {function o(e) {var a = {};for (var t in e) {if (e.hasOwnProperty(t)) {var r = e[t];var n = null;switch (t) {case "book":case "name":n = [ "<string>", localize(r) ];break;case "bookKey":n = [ "<data>", r ];break;case "bookID":n = [ "<integer>", r ];break;case "a":case "b":case "black":case "blue":case "brightness":case "cyan":case "gray":case "green":case "luminance":case "magenta":case "red":case "saturation":case "yellowColor":n = [ "<double>", r ];break;case "hue":n = [ "<unitDouble>", [ "angleUnit", r ] ];break;case "color":var i;if ("book" in r && "name" in r || "bookID" in r && "bookKey" in r) {i = "bookColor";} else if ("cyan" in r && "magenta" in r && "yellowColor" in r && "black" in r) {i = "CMYKColorClass";} else if ("gray" in r) {i = "grayscale";} else if ("hue" in r && "saturation" in r && "brightness" in r) {i = "HSBColorClass";} else if ("luminance" in r && "a" in r && "b" in r) {i = "labColor";} else if ("red" in r && "green" in r && "blue" in r) {i = "RGBColor";}n = [ "<object>", [ i, o(r) ] ];break;}if (n) {a[t] = n;}}}return a;}a = o({"color": e})["color"];} else if (e.constructor === Array) {var t = e[0];switch (jamEngine.uniIdStrToId(t)) {case jamEngine.uniIdStrToId("bookColor"):switch (e[1].length) {case 2:if (typeof e[1][0] === "string") {a = [ "<object>", [ "bookColor", {"book": [ "<string>", e[1][0] ],"name": [ "<string>", e[1][1] ]} ] ];} else if (typeof e[1][0] === "number") {a = [ "<object>", [ "bookColor", {"bookID": [ "<integer>", e[1][0] ],"bookKey": [ "<data>", e[1][1] ]} ] ];}break;case 4:a = [ "<object>", [ "bookColor", {"book": [ "<string>", e[1][0] ],"name": [ "<string>", e[1][1] ],"bookID": [ "<integer>", e[1][2] ],"bookKey": [ "<data>", e[1][3] ]} ] ];break;}break;case jamEngine.uniIdStrToId("CMYKColorClass"):a = [ "<object>", [ "CMYKColorClass", {"cyan": [ "<double>", e[1][0] ],"magenta": [ "<double>", e[1][1] ],"yellowColor": [ "<double>", e[1][2] ],"black": [ "<double>", e[1][3] ]} ] ];break;case jamEngine.uniIdStrToId("grayscale"):a = [ "<object>", [ "grayscale", {"gray": [ "<double>", e[1].constructor === Array ? e[1][0] : e[1] ]} ] ];break;case jamEngine.uniIdStrToId("HSBColorClass"):a = [ "<object>", [ "HSBColorClass", {"hue": [ "<unitDouble>", [ "angleUnit", e[1][0] ] ],"saturation": [ "<double>", e[1][1] ],"brightness": [ "<double>", e[1][2] ]} ] ];break;case jamEngine.uniIdStrToId("labColor"):a = [ "<object>", [ "labColor", {"luminance": [ "<double>", e[1][0] ],"a": [ "<double>", e[1][1] ],"b": [ "<double>", e[1][2] ]} ] ];break;case jamEngine.uniIdStrToId("RGBColor"):a = [ "<object>", [ "RGBColor", {"red": [ "<double>", e[1][0] ],"green": [ "<double>", e[1][1] ],"blue": [ "<double>", e[1][2] ]} ] ];break;default:throw new Error("[jamHelpers.toColorObject] Unrecognized color class: " + t);break;}}return a;};jamHelpers.fromColorObject = function(e, a) {var t;if (a) {t = jamEngine.simplifyObject(e);} else {var r = jamEngine.normalizeJsonItem(e, {"meaningfulIds": true,"parseFriendly": true});var n = r[1][0];var i = r[1][1];switch (n) {case "bookColor":var o = i["book"][1];var s = i["name"][1];if ("bookID" in i && "bookKey" in i) {var c = i["bookID"][1];var l = i["bookKey"][1];t = [ n, [ o, s, c, l ] ];} else {t = [ n, [ o, s ] ];}break;case "CMYKColorClass":var u = i["cyan"][1];var p = i["magenta"][1];var f = i["yellowColor"][1];var m = i["black"][1];t = [ n, [ u, p, f, m ] ];break;case "grayscale":var g = i["gray"][1];t = [ n, [ g ] ];break;case "HSBColorClass":var y = i["hue"][1][1];var d = i["saturation"][1];var h = i["brightness"][1];t = [ n, [ y, d, h ] ];break;case "labColor":var v = i["luminance"][1];var b = i["a"][1];var k = i["b"][1];t = [ n, [ v, b, k ] ];break;case "RGBColor":var T = i["red"][1];var j = i["green"][1];var S = i["blue"][1];t = [ n, [ T, j, S ] ];break;default:throw new Error("[jamHelpers.fromColorObject] Unrecognized color class: " + n);break;}}return t;};jamHelpers.nameToColorObject = function(e, a) {return this.toColorObject(jamColors.nameToColor(e, a));};jamHelpers.hexToColorObject = function(e) {return this.toColorObject([ "RGBColor", jamColors.hexToRgb(e) ]);};jamHelpers.hexFromColorObject = function(e, a, t) {var r = this.fromColorObject(e);return r[0] === "RGBColor" ? jamColors.rgbToHex(r[1], a, t) : null;};jamHelpers.toGradientObject = function(e) {var a;if (e.constructor === Object) {var s = this;function c(e) {var a = {};for (var t in e) {if (e.hasOwnProperty(t)) {var r = e[t];var n = null;var i;switch (t) {case "showTransparency":case "vectorColor":n = [ "<boolean>", r ];break;case "name":n = [ "<string>", localize(r) ];break;case "gradientForm":n = [ "<enumerated>", [ "gradientForm", r ] ];break;case "type":n = [ "<enumerated>", [ "colorStopType", r ] ];break;case "colorSpace":n = [ "<enumerated>", [ "colorSpace", r ] ];break;case "location":case "midpoint":case "randomSeed":case "smoothness":n = [ "<integer>", r ];break;case "interpolation":n = [ "<double>", r ];break;case "opacity":n = [ "<unitDouble>", [ "percentUnit", r ] ];break;case "colors":i = [];for (var o = 0; o < r.length; o++) {i.push([ "<object>", [ "colorStop", c(r[o]) ] ]);}n = [ "<list>", i ];break;case "transparency":i = [];for (var o = 0; o < r.length; o++) {i.push([ "<object>", [ "transparencyStop", c(r[o]) ] ]);}n = [ "<list>", i ];break;case "minimum":case "maximum":i = [];for (var o = 0; o < r.length; o++) {i.push([ "<integer>", r[o] ]);}n = [ "<list>", i ];break;case "color":n = s.toColorObject(r);break;case "gradient":n = [ "<object>", [ "gradientClassEvent", c(r) ] ];break;}if (n) {a[t] = n;}}}return a;}a = c({"gradient": e})["gradient"];} else if (e.constructor === Array) {var t = {};var r = e[0];if (r) {t["name"] = [ "<string>", r ];}var n = e[1];t["gradientForm"] = [ "<enumerated>", [ "gradientForm", n ] ];switch (jamEngine.uniIdStrToId(n)) {case jamEngine.uniIdStrToId("customStops"):t["interpolation"] = [ "<double>", e[2] ];var i = e[3];var o = [];for (var l = 0; l < i.length; l++) {var u = {};u["location"] = [ "<integer>", i[l][0] ];u["midpoint"] = [ "<integer>", i[l][1] ];var p = i[l][2];u["type"] = [ "<enumerated>", [ "colorStopType", p ] ];switch (jamEngine.uniIdStrToId(p)) {case jamEngine.uniIdStrToId("userStop"):u["color"] = this.toColorObject(i[l][3]);break;case jamEngine.uniIdStrToId("backgroundColor"):case jamEngine.uniIdStrToId("foregroundColor"):break;default:throw new Error("[jamHelpers.toGradientObject] Unrecognized color stop type: " + p);break;}o.push([ "<object>", [ "colorStop", u ] ]);}t["colors"] = [ "<list>", o ];var f = e[4];if (typeof f !== "undefined") {var m = [];for (var g = 0; g < f.length; g++) {var y = {};y["location"] = [ "<integer>", f[g][0] ];y["midpoint"] = [ "<integer>", f[g][1] ];y["opacity"] = [ "<unitDouble>", [ "percentUnit", f[g][2] ] ];m.push([ "<object>", [ "transparencyStop", y ] ]);}t["transparency"] = [ "<list>", m ];}break;case jamEngine.uniIdStrToId("colorNoise"):t["randomSeed"] = [ "<integer>", e[2] ];t["showTransparency"] = [ "<boolean>", e[3] ];t["vectorColor"] = [ "<boolean>", e[4] ];t["smoothness"] = [ "<integer>", e[5] ];var d = e[6];t["colorSpace"] = [ "<enumerated>", [ "colorSpace", d ] ];switch (jamEngine.uniIdStrToId(d)) {case jamEngine.uniIdStrToId("RGBColor"):case jamEngine.uniIdStrToId("HSBColorEnum"):case jamEngine.uniIdStrToId("labColor"):break;default:throw new Error("[jamHelpers.toGradientObject] Unrecognized color space: " + d);break;}t["minimum"] = this.toIntegerList(e[7]);t["maximum"] = this.toIntegerList(e[8]);break;default:throw new Error("[jamHelpers.toGradientObject] Unrecognized gradient form: " + n);break;}a = [ "<object>", [ "gradientClassEvent", t ] ];}return a;};jamHelpers.fromGradientObject = function(e, a) {var t;if (a) {t = jamEngine.simplifyObject(e);} else {t = [];var r = jamEngine.normalizeJsonItem(e, {"meaningfulIds": true,"parseFriendly": true});var n = r[1][1];var i = n["name"];t.push(i ? i[1] : null);var o = n["gradientForm"][1][1];t.push(o);switch (o) {case "customStops":t.push(n["interpolation"][1]);var s = n["colors"][1];var c = [];for (var l = 0; l < s.length; l++) {var u = s[l][1][1];var p = [];p.push(u["location"][1]);p.push(u["midpoint"][1]);var f = u["type"][1][1];p.push(f);switch (f) {case "userStop":p.push(this.fromColorObject(u["color"]));break;case "backgroundColor":case "foregroundColor":break;default:throw new Error("[jamHelpers.fromGradientObject] Unrecognized color stop type: " + f);break;}c.push(p);}t.push(c);var m = n["transparency"][1];var g = [];for (var y = 0; y < m.length; y++) {var d = m[y][1][1];var h = [];h.push(d["location"][1]);h.push(d["midpoint"][1]);h.push(d["opacity"][1][1]);g.push(h);}t.push(g);break;case "colorNoise":t.push(n["randomSeed"][1]);t.push(n["showTransparency"][1]);t.push(n["vectorColor"][1]);t.push(n["smoothness"][1]);var v = n["colorSpace"][1][1];t.push(v);switch (v) {case "RGBColor":case "HSBColorEnum":case "labColor":break;default:throw new Error("[jamHelpers.fromGradientObject] Unrecognized color space: " + v);break;}t.push(this.fromIntegerList(n["minimum"]));t.push(this.fromIntegerList(n["maximum"]));break;default:throw new Error("[jamHelpers.fromGradientObject] Unrecognized gradient form: " + o);break;}}return t;};jamHelpers.toCurvesAdjustmentList = function(e) {var a = [];for (var t = 0; t < e.length; t++) {var r = e[t];var n = [ "<reference>", [ [ "channel", [ "<enumerated>", [ "channel", r[0] ] ] ] ] ];var i = r[1];var o = i[0];var s = i[1];var c = [];switch (jamEngine.uniIdStrToId(o)) {case jamEngine.uniIdStrToId("mapping"):for (var l = 0; l < s.length; l++) {c.push([ "<integer>", s[l] ]);}var u = [ "<list>", c ];a.push([ "<object>", [ "curvesAdjustment", {"channel": n,"mapping": u} ] ]);break;case jamEngine.uniIdStrToId("curve"):for (var l = 0; l < s.length; l++) {var p = [ "<object>", [ "point", {"horizontal": [ "<double>", s[l][0] ],"vertical": [ "<double>", s[l][1] ]} ] ];c.push(p);}var f = [ "<list>", c ];a.push([ "<object>", [ "curvesAdjustment", {"channel": n,"curve": f} ] ]);break;default:throw new Error("[jamHelpers.toCurvesAdjustmentList] Unrecognized curve type");break;}}return [ "<list>", a ];};jamHelpers.toHueSatAdjustmentV2List = function(e) {var a = [];for (var t = 0; t < e.length; t++) {var r = e[t];var n;if (r.length === 3 && t === 0) {n = {"hue": [ "<integer>", r[0] ],"saturation": [ "<integer>", r[1] ],"lightness": [ "<integer>", r[2] ]};} else if (r.length === 1 + 4 + 3) {n = {"localRange": [ "<integer>", r[0] ],"beginRamp": [ "<integer>", r[1] ],"beginSustain": [ "<integer>", r[2] ],"endSustain": [ "<integer>", r[3] ],"endRamp": [ "<integer>", r[4] ],"hue": [ "<integer>", r[5] ],"saturation": [ "<integer>", r[6] ],"lightness": [ "<integer>", r[7] ]};}a.push([ "<object>", [ "hueSatAdjustmentV2", n ] ]);}return [ "<list>", a ];};jamHelpers.toBlendRangeList = function(e) {var a = [];var t;for (var r = 0; r < e.length; r++) {var n = e[r];if (n.constructor === Object) {function i(e) {var a = {};for (var t in e) {if (e.hasOwnProperty(t)) {var r = e[t];var n = null;switch (t) {case "channel":n = [ "<reference>", [ [ "channel", [ "<enumerated>", [ "channel", r ] ] ] ] ];break;case "srcBlackMin":case "srcBlackMax":case "srcWhiteMin":case "srcWhiteMax":case "destBlackMin":case "destBlackMax":case "destWhiteMin":case "destWhiteMax":n = [ "<integer>", r ];break;case "blendRange":n = [ "<object>", [ "blendRange", i(r) ] ];break;}if (n) {a[t] = n;}}}return a;}t = i({"blendRange": n})["blendRange"];} else if (n.constructor === Array) {t = [ "<object>", [ "blendRange", {"channel": [ "<reference>", [ [ "channel", [ "<enumerated>", [ "channel", n[0] ] ] ] ] ],"srcBlackMin": [ "<integer>", n[1] ],"srcBlackMax": [ "<integer>", n[2] ],"srcWhiteMin": [ "<integer>", n[3] ],"srcWhiteMax": [ "<integer>", n[4] ],"destBlackMin": [ "<integer>", n[5] ],"destBlackMax": [ "<integer>", n[6] ],"destWhiteMin": [ "<integer>", n[7] ],"destWhiteMax": [ "<integer>", n[8] ]} ] ];}a.push(t);}return [ "<list>", a ];};jamHelpers.fromBlendRangeList = function(e, a) {var t;if (a) {var r = function(e, a, t) {var r = undefined;if (a === "channel") {var n = t(e, a);r = n[0]["channel"];}return r;};t = jamEngine.simplifyList(e, r);} else {t = [];var n = jamEngine.normalizeJsonItem(e, {"meaningfulIds": true,"parseFriendly": true});for (index = 0; index < n[1].length; index++) {var i = n[1][index][1][1];var o = [ i["channel"][1][0][1][1][1], i["srcBlackMin"][1], i["srcBlackMax"][1], i["srcWhiteMin"][1], i["srcWhiteMax"][1], i["destBlackMin"][1], i["destBlackMax"][1], i["destWhiteMin"][1], i["destWhiteMax"][1] ];t.push(o);}}return t;};jamHelpers.toIntegerList = function(e) {var a = [];for (var t = 0; t < e.length; t++) {a.push([ "<integer>", e[t] ]);}return [ "<list>", a ];};jamHelpers.fromIntegerList = function(e) {var a = jamEngine.normalizeJsonItem(e, {"meaningfulIds": true,"parseFriendly": true});var t = [];var r = a[1];for (var n = 0; n < r.length; n++) {t.push(r[n][1]);}return t;};function b(e, a) {return typeof a === "undefined" ? [ "<double>", e ] : [ "<unitDouble>", [ a, e ] ];}jamHelpers.toPointObject = function(e) {var a = e[0];var t = e[1];var r = [ "<object>", [ "point", {"horizontal": b(a[0], t),"vertical": b(a[1], t)} ] ];return r;};jamHelpers.toPointList = function(e) {var a = e[0];var t = e[1];var r = [];for (var n = 0; n < a.length; n++) {r.push([ "<object>", [ "point", {"horizontal": b(a[n][0], t),"vertical": b(a[n][1], t)} ] ]);}return [ "<list>", r ];};jamHelpers.fromPointList = function(e) {var a = [];var t = jamEngine.normalizeJsonItem(e, {"meaningfulIds": true,"parseFriendly": true});var r = [];var n;function i(e) {var a;switch (e[0]) {case "<unitDouble>":n = e[1][0];a = e[1][1];break;case "<double>":n = undefined;a = e[1];break;}return a;}var o = t[1];for (var s = 0; s < o.length; s++) {r.push([ i(o[s][1][1]["horizontal"]), i(o[s][1][1]["vertical"]) ]);}a.push(r);if (n) {a.push(n);}return a;};jamHelpers.toOffsetObject = function(e) {var a = e[0];var t = e[1];var r = [ "<object>", [ "offset", {"horizontal": b(a[0], t),"vertical": b(a[1], t)} ] ];return r;};jamHelpers.toRectangleObject = function(e) {var a = e[0];var t = e[1];var r = {"left": b(a[0], t),"top": b(a[1], t),"right": b(a[2], t),"bottom": b(a[3], t)};if (a.length === 5) {r["radius"] = b(a[4], t);}return [ "<object>", [ "rectangle", r ] ];};jamHelpers.toEllipseObject = function(e) {var a = e[0];var t = e[1];var r = [ "<object>", [ "ellipse", {"left": b(a[0], t),"top": b(a[1], t),"right": b(a[2], t),"bottom": b(a[3], t)} ] ];return r;};jamHelpers.toCustomShapeObject = function(e) {var a = e[0];var t = e[1];var r = [ "<object>", [ "customShape", {"name": [ "<string>", a[0] ],"left": b(a[1], t),"top": b(a[2], t),"right": b(a[3], t),"bottom": b(a[4], t)} ] ];return r;};jamHelpers.toCurvePointList = function(e) {var a = [];var t;for (var r = 0; r < e.length; r++) {var n = e[r];if (n.constructor === Object) {function i(e) {var a = {};for (var t in e) {if (e.hasOwnProperty(t)) {var r = e[t];var n = null;switch (t) {case "continuity":n = [ "<boolean>", r ];break;case "horizontal":case "vertical":n = [ "<double>", r ];break;case "curvePoint":n = [ "<object>", [ "curvePoint", i(r) ] ];break;}if (n) {a[t] = n;}}}return a;}t = i({"curvePoint": n})["curvePoint"];} else if (n.constructor === Array) {switch (n.length) {case 2:t = [ "<object>", [ "curvePoint", {"horizontal": [ "<double>", n[0] ],"vertical": [ "<double>", n[1] ]} ] ];break;case 3:t = [ "<object>", [ "curvePoint", {"horizontal": [ "<double>", n[0] ],"vertical": [ "<double>", n[1] ],"continuity": [ "<boolean>", n[2] ]} ] ];break;}}a.push(t);}return [ "<list>", a ];};jamHelpers.fromCurvePointList = function(e, a) {var t;if (a) {t = jamEngine.simplifyList(e);} else {t = [];var r = jamEngine.normalizeJsonItem(e, {"meaningfulIds": true,"parseFriendly": true});for (index = 0; index < r[1].length; index++) {var n = r[1][index][1][1];var i = [ n["horizontal"][1], n["vertical"][1] ];if ("continuity" in n) {i.push(n["continuity"][1]);}t.push(i);}}return t;};jamHelpers.toRationalPointList = function(e) {var a = e[0];var t = e[1];var r = [];for (var n = 0; n < a.length; n++) {r.push([ "<object>", [ "rationalPoint", {"horizontal": b(a[n][0], t),"vertical": b(a[n][1], t)} ] ]);}return [ "<list>", r ];};jamHelpers.toPathComponentList = function(e) {var a;if (e.constructor === Object) {var s;if ("unit" in e) {s = e["unit"];}var t = e["pathComponents"];function c(e) {var a = {};for (var t in e) {if (e.hasOwnProperty(t)) {var r = e[t];var n = null;var i;switch (t) {case "closedSubpath":case "smooth":case "windingFill":n = [ "<boolean>", r ];break;case "shapeOperation":n = [ "<enumerated>", [ "shapeOperation", r ] ];break;case "horizontal":case "vertical":n = b(r, s);break;case "anchor":case "backward":case "forward":n = [ "<object>", [ "point", c(r) ] ];break;case "subpathListKey":i = [];for (var o = 0; o < r.length; o++) {i.push([ "<object>", [ "subpathsList", c(r[o]) ] ]);}n = [ "<list>", i ];break;case "points":i = [];for (var o = 0; o < r.length; o++) {i.push([ "<object>", [ "pathPoint", c(r[o]) ] ]);}n = [ "<list>", i ];break;case "pathComponents":i = [];for (var o = 0; o < r.length; o++) {i.push([ "<object>", [ "pathComponent", c(r[o]) ] ]);}n = [ "<list>", i ];break;}if (n) {a[t] = n;}}}return a;}a = c({"pathComponents": t})["pathComponents"];} else if (e.constructor === Array) {var r = [];var t = e[0];var s = e[1];for (var n = 0; n < t.length; n++) {var i = t[n][0];var o = t[n][1];var l = t[n][2];var u = [];for (var p = 0; p < o.length; p++) {var f = o[p][0];var m = o[p][1];var g = [];for (var y = 0; y < f.length; y++) {var d = f[y];switch (d.length) {case 1:g.push([ "<object>", [ "pathPoint", {"anchor": [ "<object>", [ "point", {"horizontal": b(d[0][0], s),"vertical": b(d[0][1], s)} ] ]} ] ]);break;case 3:case 4:g.push([ "<object>", [ "pathPoint", {"anchor": [ "<object>", [ "point", {"horizontal": b(d[0][0], s),"vertical": b(d[0][1], s)} ] ],"forward": [ "<object>", [ "point", {"horizontal": b(d[1][0], s),"vertical": b(d[1][1], s)} ] ],"backward": [ "<object>", [ "point", {"horizontal": b(d[2][0], s),"vertical": b(d[2][1], s)} ] ],"smooth": [ "<boolean>", d[3] || false ]} ] ]);break;}}var h = {};if (m) {h["closedSubpath"] = [ "<boolean>", m ];}h["points"] = [ "<list>", g ];u.push([ "<object>", [ "subpathsList", h ] ]);}var v = {};v["shapeOperation"] = [ "<enumerated>", [ "shapeOperation", i ] ];if (l) {v["windingFill"] = [ "<boolean>", l ];}v["subpathListKey"] = [ "<list>", u ];r.push([ "<object>", [ "pathComponent", v ] ]);}a = [ "<list>", r ];}return a;};jamHelpers.fromPathComponentList = function(e, a) {var t;if (a) {t = {};var r;var n = false;function i(e, a) {if (!n) {if (a === "horizontal") {var t = e[a];if (t[0] === "<unitDouble>") {r = t[1][0];}n = true;}}return undefined;}t["pathComponents"] = jamEngine.simplifyList(e, i);if (r) {t["unit"] = r;}} else {t = [];var o = jamEngine.normalizeJsonItem(e, {"meaningfulIds": true,"parseFriendly": true});var s = [];var r;function c(e) {var a;switch (e[0]) {case "<unitDouble>":r = e[1][0];a = e[1][1];break;case "<double>":r = undefined;a = e[1];break;}return a;}var l = o[1];for (var u = 0; u < l.length; u++) {var p = l[u][1][1];var f = p["shapeOperation"][1][1];var m = "windingFill" in p ? p["windingFill"][1] : false;var g = [];var y = p["subpathListKey"][1];for (var d = 0; d < y.length; d++) {var h = y[d][1][1];var v = "closedSubpath" in h ? h["closedSubpath"][1] : false;var b = [];var k = h["points"][1];for (var T = 0; T < k.length; T++) {var j = k[T][1][1];var S = [];var I = j["anchor"][1][1];S.push([ c(I["horizontal"]), c(I["vertical"]) ]);if ("forward" in j) {var x = j["forward"][1][1];S.push([ c(x["horizontal"]), c(x["vertical"]) ]);}if ("backward" in j) {var E = j["backward"][1][1];S.push([ c(E["horizontal"]), c(E["vertical"]) ]);}var D = "smooth" in j ? j["smooth"][1] : false;if (D) {S.push(D);}b.push(S);}var C = [];C.push(b);if (v) {C.push(v);}g.push(C);}var w = [];w.push(f);w.push(g);if (m) {w.push(m);}s.push(w);}t.push(s);if (r) {t.push(r);}}return t;};})();}if (typeof jamJSON !== "object") {var jamJSON = {};(function() {var state;var stack;var container;var key;var value;var escapes = {"\\": "\\",'"': '"',"/": "/","t": "\t","n": "\n","r": "\r","f": "\f","b": "\b"};var action = {"{": {"go": function() {stack.push({"state": "ok"});container = {};state = "firstokey";},"ovalue": function() {stack.push({"container": container,"state": "ocomma","key": key});container = {};state = "firstokey";},"firstavalue": function() {stack.push({"container": container,"state": "acomma"});container = {};state = "firstokey";},"avalue": function() {stack.push({"container": container,"state": "acomma"});container = {};state = "firstokey";}},"}": {"firstokey": function() {var e = stack.pop();value = container;container = e.container;key = e.key;state = e.state;},"ocomma": function() {var e = stack.pop();container[key] = value;value = container;container = e.container;key = e.key;state = e.state;}},"[": {"go": function() {stack.push({"state": "ok"});container = [];state = "firstavalue";},"ovalue": function() {stack.push({"container": container,"state": "ocomma","key": key});container = [];state = "firstavalue";},"firstavalue": function() {stack.push({"container": container,"state": "acomma"});container = [];state = "firstavalue";},"avalue": function() {stack.push({"container": container,"state": "acomma"});container = [];state = "firstavalue";}},"]": {"firstavalue": function() {var e = stack.pop();value = container;container = e.container;key = e.key;state = e.state;},"acomma": function() {var e = stack.pop();container.push(value);value = container;container = e.container;key = e.key;state = e.state;}},":": {"colon": function() {if (container.hasOwnProperty(key)) {throw new SyntaxError("[jamJSON.parse] Duplicate key: " + key + "");}state = "ovalue";}},",": {"ocomma": function() {container[key] = value;state = "okey";},"acomma": function() {container.push(value);state = "avalue";}},"true": {"go": function() {value = true;state = "ok";},"ovalue": function() {value = true;state = "ocomma";},"firstavalue": function() {value = true;state = "acomma";},"avalue": function() {value = true;state = "acomma";}},"false": {"go": function() {value = false;state = "ok";},"ovalue": function() {value = false;state = "ocomma";},"firstavalue": function() {value = false;state = "acomma";},"avalue": function() {value = false;state = "acomma";}},"null": {"go": function() {value = null;state = "ok";},"ovalue": function() {value = null;state = "ocomma";},"firstavalue": function() {value = null;state = "acomma";},"avalue": function() {value = null;state = "acomma";}}};var number = {"go": function() {state = "ok";},"ovalue": function() {state = "ocomma";},"firstavalue": function() {state = "acomma";},"avalue": function() {state = "acomma";}};var string = {"go": function() {state = "ok";},"firstokey": function() {key = value;state = "colon";},"okey": function() {key = value;state = "colon";},"ovalue": function() {state = "ocomma";},"firstavalue": function() {state = "acomma";},"avalue": function() {state = "acomma";}};var commentFunc = function() {};function debackslashify(e) {return e.replace(/\\(?:u(.{4})|([^u]))/g, function(e, a, t) {return a ? String.fromCharCode(parseInt(a, 16)) : escapes[t];});}jamJSON.parse = function(text, validate, allowComments) {if (validate) {var tx = /^[\x20\t\n\r]*(?:([,:\[\]{}]|true|false|null)|(-?(?:0|[1-9][0-9]*)(?:\.[0-9]+)?(?:[eE][+\-]?[0-9]+)?)|"((?:[^\r\n\t\\\"]|\\(?:["\\\/trnfb]|u[0-9a-fA-F]{4}))*)")/;var txc = /^[\x20\t\n\r]*(?:(\/(?:\/.*|\*(?:.|[\r\n])*?\*\/))|([,:\[\]{}]|true|false|null)|(-?(?:0|[1-9][0-9]*)(?:\.[0-9]+)?(?:[eE][+\-]?[0-9]+)?)|"((?:[^\r\n\t\\\"]|\\(?:["\\\/trnfb]|u[0-9a-fA-F]{4}))*)")/;var r;var i;var actionFunc;state = "go";stack = [];try {while (true) {i = allowComments ? 1 : 0;r = allowComments ? txc.exec(text) : tx.exec(text);if (!r) {break;}if (allowComments && r[1]) {actionFunc = commentFunc;} else if (r[i + 1]) {actionFunc = action[r[i + 1]][state];} else if (r[i + 2]) {value = +r[i + 2];actionFunc = number[state];} else {value = debackslashify(r[i + 3]);actionFunc = string[state];}if (actionFunc) {actionFunc();text = text.slice(r[0].length);} else {break;}}} catch (e) {state = e;}if (state !== "ok" || /[^\x20\t\n\r]/.test(text)) {throw state instanceof SyntaxError ? state : new SyntaxError("[jamJSON.parse] Invalid JSON");}return value;} else {return eval("(" + text + ")");}};var escapable = /[\\\"\x00-\x1F\x7F-\x9F\u00AD\u0600-\u0604\u070F\u17B4\u17B5\u200C-\u200F\u2028-\u202F\u2060-\u206F\uFEFF\uFFF0-\uFFFF]/g;var meta = {"\b": "\\b","\t": "\\t","\n": "\\n","\f": "\\f","\r": "\\r",'"': '\\"',"\\": "\\\\"};var gap;var indent;var prefixIndent;function quote(e) {escapable.lastIndex = 0;return escapable.test(e) ? '"' + e.replace(escapable, function(e) {var a = meta[e];return typeof a === "string" ? a : "\\u" + ("0000" + e.charCodeAt(0).toString(16).toUpperCase()).slice(-4);}) + '"' : '"' + e + '"';}function str(e) {var a;var t;var r;var n = gap;var i;switch (typeof e) {case "string":return quote(e);case "number":return isFinite(e) ? String(e) : "null";case "boolean":case "null":return String(e);case "object":if (!e) {return "null";}gap += indent;i = [];if (e.constructor === Array) {for (a = 0; a < e.length; a++) {i[a] = str(e[a]);}var o = gap ? "[\n" + prefixIndent + n + "]" : "[ ]";var s = gap ? "[\n" + prefixIndent + gap + i.join(",\n" + prefixIndent + gap) + "\n" + prefixIndent + n + "]" : "[ " + i.join(", ") + " ]";r = i.length === 0 ? o : s;gap = n;return r;} else {for (t in e) {if (e.hasOwnProperty(t)) {r = str(e[t]);if (r) {i.push(quote(t) + (gap && (r.charAt(0) === "{" || r.charAt(0) === "[") ? ":\n" + prefixIndent + gap : ": ") + r);}}}var c = gap ? "{\n" + prefixIndent + n + "}" : "{ }";var l = gap ? "{\n" + prefixIndent + gap + i.join(",\n" + prefixIndent + gap) + "\n" + prefixIndent + n + "}" : "{ " + i.join(", ") + " }";r = i.length === 0 ? c : l;gap = n;return r;}default:throw new SyntaxError("[jamJSON.stringify] Invalid JSON");}}jamJSON.stringify = function(e, a, t) {var r;gap = "";indent = "";prefixIndent = "";if (typeof a === "number") {for (r = 0; r < a; r++) {indent += " ";}} else if (typeof a === "string") {indent = a;}if (typeof t === "number") {for (r = 0; r < t; r++) {prefixIndent += " ";}} else if (typeof t === "string") {prefixIndent = t;}return prefixIndent + str(e);};})();}if (typeof jamText !== "object") {var jamText = {};(function() {jamText.toLayerTextObject = function(e) {var l;if ("typeUnit" in e) {l = e["typeUnit"];}var a = e["layerText"];function u(e, a) {var t = {};for (var r in e) {if (e.hasOwnProperty(r)) {var n = e[r];var i = null;var o;switch (r) {case "bookKey":i = [ "<data>", n ];break;case "rowMajorOrder":case "syntheticBold":case "syntheticItalic":case "autoLeading":case "ligature":case "altligature":case "contextualLigatures":case "alternateLigatures":case "oldStyle":case "fractions":case "ordinals":case "swash":case "titling":case "connectionForms":case "stylisticAlternates":case "ornaments":case "proportionalMetrics":case "kana":case "italics":case "ruby":case "enableWariChu":case "noBreak":case "fill":case "stroke":case "fillFirst":case "fillOverPrint":case "strokeOverPrint":case "hyphenate":case "hyphenateCapitalized":case "hangingRoman":case "keepTogether":case "kurikaeshiMojiShori":case "textEveryLineComposer":case "flip":i = [ "<boolean>", n ];break;case "textKey":case "fontPostScriptName":case "fontName":case "fontStyleName":case "book":case "name":i = [ "<string>", n ];break;case "rowCount":case "columnCount":case "from":case "to":case "fontScript":case "fontTechnology":case "tracking":case "wariChuCount":case "wariChuLineGap":case "wariChuWidow":case "wariChuOrphan":case "tcyUpDown":case "tcyLeftRight":case "jiDori":case "bookID":case "dropCapMultiplier":case "hyphenateWordSize":case "hyphenatePreLength":case "hyphenatePostLength":case "hyphenateLimit":case "autoTCY":case "kerning":case "pathTypeSpacing":i = [ "<integer>", n ];break;case "warpValue":case "warpPerspective":case "warpPerspectiveOther":case "xx":case "xy":case "yx":case "yy":case "tx":case "ty":case "top":case "left":case "bottom":case "right":case "horizontalScale":case "verticalScale":case "characterRotation":case "mojiZume":case "wariChuScale":case "a":case "b":case "black":case "blue":case "brightness":case "cyan":case "gray":case "green":case "luminance":case "magenta":case "red":case "saturation":case "yellowColor":case "lineDashoffset":case "autoLeadingPercentage":case "hyphenationZone":case "hyphenationPreference":case "justificationWordMinimum":case "justificationWordDesired":case "justificationWordMaximum":case "justificationLetterMinimum":case "justificationLetterDesired":case "justificationLetterMaximum":case "justificationGlyphMinimum":case "justificationGlyphDesired":case "justificationGlyphMaximum":case "defaultTabWidth":case "start":case "end":i = [ "<double>", n ];break;case "rowGutter":case "columnGutter":case "spacing":case "firstBaselineMinimum":case "size":case "leading":case "baselineShift":case "underlineOffset":case "lineWidth":case "miterLimit":case "firstLineIndent":case "startIndent":case "endIndent":case "spaceBefore":case "spaceAfter":i = l ? [ "<unitDouble>", [ l, n ] ] : [ "<double>", n ];break;case "horizontal":case "vertical":i = a ? [ "<unitDouble>", [ a, n ] ] : [ "<double>", n ];break;case "hue":i = [ "<unitDouble>", [ "angleUnit", n ] ];break;case "warpStyle":case "textGridding":case "orientation":case "textType":case "frameBaselineAlignment":case "autoKern":case "fontCaps":case "baseline":case "otbaseline":case "strikethrough":case "underline":case "figureStyle":case "baselineDirection":case "textLanguage":case "japaneseAlternate":case "gridAlignment":case "wariChuJustification":case "lineCap":case "lineJoin":case "leadingType":case "burasagari":case "preferredKinsokuOrder":case "pathTypeEffect":case "pathTypeAlignment":case "pathTypeAlignTo":i = [ "<enumerated>", [ r, n ] ];break;case "antiAlias":i = [ "<enumerated>", [ "antiAliasType", n ] ];break;case "warpRotate":i = [ "<enumerated>", [ "orientation", n ] ];break;case "alignment":case "singleWordJustification":i = [ "<enumerated>", [ "alignmentType", n ] ];break;case "textShape":case "textStyleRange":case "paragraphStyleRange":case "kerningRange":o = [];for (var s = 0; s < n.length; s++) {o.push([ "<object>", [ r, u(n[s]) ] ]);}i = [ "<list>", o ];break;case "warp":case "transform":case "textStyle":case "paragraphStyle":i = [ "<object>", [ r, u(n) ] ];break;case "defaultStyle":i = [ "<object>", [ "textStyle", u(n) ] ];break;case "color":case "strokeColor":var c;if ("book" in n && "name" in n || "bookID" in n && "bookKey" in n) {c = "bookColor";} else if ("cyan" in n && "magenta" in n && "yellowColor" in n && "black" in n) {c = "CMYKColorClass";} else if ("gray" in n) {c = "grayscale";} else if ("hue" in n && "saturation" in n && "brightness" in n) {c = "HSBColorClass";} else if ("luminance" in n && "a" in n && "b" in n) {c = "labColor";} else if ("red" in n && "green" in n && "blue" in n) {c = "RGBColor";}i = [ "<object>", [ c, u(n) ] ];break;case "textClickPoint":i = [ "<object>", [ "point", u(n, "percentUnit") ] ];break;case "base":i = [ "<object>", [ "point", u(n) ] ];break;case "bounds":i = [ "<object>", [ "rectangle", u(n) ] ];break;case "path":i = [ "<object>", [ "pathClass", {"pathComponents": jamHelpers.toPathComponentList(n)} ] ];break;case "tRange":i = [ "<object>", [ "range", u(n) ] ];break;case "textLayer":i = [ "<object>", [ "textLayer", u(n) ] ];break;case "mojiKumiName":case "kinsokuSetName":if (true) {i = [ "<enumerated>", [ r, n ] ];} else {i = [ "<string>", n ];}break;case "leftAki":case "rightAki":if (true) {i = [ "<double>", n ];} else {i = l ? [ "<unitDouble>", [ l, n ] ] : [ "<double>", n ];}break;}if (i) {t[r] = i;}}}return t;}return u({"textLayer": a})["textLayer"];};jamText.fromLayerTextObject = function(e) {var a = {};var n;var i = false;function t(e, a) {var t;if (a === "path") {t = jamHelpers.fromPathComponentList(e[a][1][1]["pathComponents"], true);} else if (!i) {switch (a) {case "rowGutter":case "columnGutter":case "spacing":case "firstBaselineMinimum":case "size":case "leading":case "baselineShift":case "underlineOffset":case "lineWidth":case "miterLimit":case "firstLineIndent":case "startIndent":case "endIndent":case "spaceBefore":case "spaceAfter":case "leftAki":case "rightAki":var r = e[a];if (r[0] === "<unitDouble>") {n = r[1][0];}i = true;break;}}return t;}a["layerText"] = jamEngine.simplifyObject(e, t);if (n) {a["typeUnit"] = n;}return a;};jamText.setLayerText = function(e) {var a = jamEngine.meaningfulIds;var t = jamEngine.parseFriendly;jamEngine.meaningfulIds = true;jamEngine.parseFriendly = true;var r = false;try {resultObj = jamEngine.jsonGet([ {"property": {"<property>": "textKey"}}, {"layer": {"<enumerated>": {"ordinal": "targetEnum"}}} ]);if ("textKey" in resultObj) {r = true;}} catch (e) {}jamEngine.meaningfulIds = a;jamEngine.parseFriendly = t;if (r) {jamEngine.jsonPlay("set", {"target": [ "<reference>", [ [ "layer", [ "<enumerated>", [ "ordinal", "targetEnum" ] ] ] ] ],"to": this.toLayerTextObject(e)});} else {jamEngine.jsonPlay("make", {"target": [ "<reference>", [ [ "textLayer", [ "<class>", null ] ] ] ],"using": this.toLayerTextObject(e)});}};jamText.getLayerText = function() {var e = null;var a = jamEngine.meaningfulIds;var t = jamEngine.parseFriendly;jamEngine.meaningfulIds = true;jamEngine.parseFriendly = true;try {var r = jamEngine.jsonGet([ {"property": {"<property>": "textKey"}}, {"layer": {"<enumerated>": {"ordinal": "targetEnum"}}} ]);if ("textKey" in r) {e = this.fromLayerTextObject(r["textKey"]);}} catch (e) {}jamEngine.meaningfulIds = a;jamEngine.parseFriendly = t;return e;};})();}if (typeof jamStyles !== "object") {var jamStyles = {};(function() {jamStyles.isStylesFile = function(e) {return e.type === "8BSL" || e.name.match(/\.asl$/i);};jamStyles.isStylesPalette = function(e) {return e.name.match(/^Styles.psp$/i);};jamStyles.toLayerEffectsObject = function(e) {function u(e, a) {var t = {};for (var r in e) {if (e.hasOwnProperty(r)) {var n = e[r];var i = null;var o;switch (r) {case "align":case "antiAlias":case "antialiasGloss":case "continuity":case "dither":case "enabled":case "invert":case "invertTexture":case "layerConceals":case "linked":case "reverse":case "showTransparency":case "useGlobalAngle":case "useShape":case "useTexture":case "vectorColor":i = [ "<boolean>", n ];break;case "book":case "ID":case "name":i = [ "<string>", localize(n) ];break;case "bookKey":i = [ "<data>", n ];break;case "bookID":case "location":case "midpoint":case "randomSeed":case "smoothness":i = [ "<integer>", n ];break;case "a":case "b":case "black":case "blue":case "brightness":case "cyan":case "gray":case "green":case "interpolation":case "luminance":case "magenta":case "red":case "saturation":case "yellowColor":i = [ "<double>", n ];break;case "angle":case "hue":case "localLightingAngle":case "localLightingAltitude":i = [ "<unitDouble>", [ "angleUnit", n ] ];break;case "chokeMatte":case "highlightOpacity":case "inputRange":case "noise":case "opacity":case "scale":case "shadingNoise":case "shadowOpacity":case "strengthRatio":case "textureDepth":i = [ "<unitDouble>", [ "percentUnit", n ] ];break;case "blur":case "distance":case "size":case "softness":i = [ "<unitDouble>", [ "pixelsUnit", n ] ];break;case "horizontal":case "vertical":i = a ? [ "<unitDouble>", [ a, n ] ] : [ "<double>", n ];break;case "type":var s;switch (n) {case "linear":case "radial":case "angle":case "reflected":case "diamond":case "shapeburst":s = "gradientType";break;case "foregroundColor":case "backgroundColor":case "userStop":s = "colorStopType";break;}i = [ "<enumerated>", [ s, n ] ];break;case "colorSpace":i = [ "<enumerated>", [ "colorSpace", n ] ];break;case "gradientForm":i = [ "<enumerated>", [ "gradientForm", n ] ];break;case "paintType":i = [ "<enumerated>", [ "frameFill", n ] ];break;case "bevelDirection":i = [ "<enumerated>", [ "bevelEmbossStampStyle", n ] ];break;case "bevelStyle":i = [ "<enumerated>", [ "bevelEmbossStyle", n ] ];break;case "bevelTechnique":i = [ "<enumerated>", [ "bevelTechnique", n ] ];break;case "glowTechnique":i = [ "<enumerated>", [ "matteTechnique", n ] ];break;case "innerGlowSource":i = [ "<enumerated>", [ "innerGlowSourceType", n ] ];break;case "style":i = [ "<enumerated>", [ "frameStyle", n ] ];break;case "highlightMode":case "mode":case "shadowMode":i = [ "<enumerated>", [ "blendMode", n ] ];break;case "bevelEmboss":case "chromeFX":case "dropShadow":case "frameFX":case "gradientFill":case "innerGlow":case "innerShadow":case "outerGlow":case "pattern":case "patternFill":case "solidFill":i = [ "<object>", [ r, u(n) ] ];break;case "color":case "highlightColor":case "shadowColor":var c;if ("book" in n && "name" in n || "bookID" in n && "bookKey" in n) {c = "bookColor";} else if ("cyan" in n && "magenta" in n && "yellowColor" in n && "black" in n) {c = "CMYKColorClass";} else if ("gray" in n) {c = "grayscale";} else if ("hue" in n && "saturation" in n && "brightness" in n) {c = "HSBColorClass";} else if ("luminance" in n && "a" in n && "b" in n) {c = "labColor";} else if ("red" in n && "green" in n && "blue" in n) {c = "RGBColor";}i = [ "<object>", [ c, u(n) ] ];break;case "gradient":i = [ "<object>", [ "gradientClassEvent", u(n) ] ];break;case "mappingShape":case "transparencyShape":i = [ "<object>", [ "shapingCurve", u(n) ] ];break;case "offset":i = [ "<object>", [ "point", u(n, "percentUnit") ] ];break;case "phase":i = [ "<object>", [ "point", u(n) ] ];break;case "minimum":case "maximum":o = [];for (var l = 0; l < n.length; l++) {o.push([ "<integer>", n[l] ]);}i = [ "<list>", o ];break;case "colors":o = [];for (var l = 0; l < n.length; l++) {o.push([ "<object>", [ "colorStop", u(n[l]) ] ]);}i = [ "<list>", o ];break;case "transparency":o = [];for (var l = 0; l < n.length; l++) {o.push([ "<object>", [ "transparencyStop", u(n[l]) ] ]);}i = [ "<list>", o ];break;case "curve":o = [];for (var l = 0; l < n.length; l++) {o.push([ "<object>", [ "curvePoint", u(n[l]) ] ]);}i = [ "<list>", o ];break;case "layerEffects":i = [ "<object>", [ "layerEffects", u(n) ] ];break;}if (i) {t[r] = i;}}}return t;}return u({"layerEffects": e})["layerEffects"];};jamStyles.fromLayerEffectsObject = function(e) {return jamEngine.simplifyObject(e);};jamStyles.toBlendOptionsObject = function(e) {function s(e) {var a = {};for (var t in e) {if (e.hasOwnProperty(t)) {var r = e[t];var n = null;var i;switch (t) {case "blendClipped":case "blendInterior":case "layerMaskAsGlobalMask":case "transparencyShapesLayer":case "vectorMaskAsGlobalMask":n = [ "<boolean>", r ];break;case "srcBlackMin":case "srcBlackMax":case "srcWhiteMin":case "srcWhiteMax":case "destBlackMin":case "destBlackMax":case "destWhiteMin":case "destWhiteMax":n = [ "<integer>", r ];break;case "fillOpacity":case "opacity":n = [ "<unitDouble>", [ "percentUnit", r ] ];break;case "mode":n = [ "<enumerated>", [ "blendMode", r ] ];break;case "knockout":n = [ "<enumerated>", [ "knockout", r ] ];break;case "channel":n = [ "<reference>", [ [ "channel", [ "<enumerated>", [ "channel", r ] ] ] ] ];break;case "blendRange":i = [];for (var o = 0; o < r.length; o++) {i.push([ "<object>", [ "blendRange", s(r[o]) ] ]);}n = [ "<list>", i ];break;case "channelRestrictions":i = [];for (var o = 0; o < r.length; o++) {i.push([ "<enumerated>", [ "channel", r[o] ] ]);}n = [ "<list>", i ];break;case "blendOptions":n = [ "<object>", [ "blendOptions", s(r) ] ];break;}if (n) {a[t] = n;}}}return a;}return s({"blendOptions": e})["blendOptions"];};jamStyles.fromBlendOptionsObject = function(e) {var a = function(e, a, t) {var r = undefined;if (a === "channel") {var n = t(e, a);r = n[0]["channel"];}return r;};return jamEngine.simplifyObject(e, a);};jamStyles.toDocumentModeObject = function(e) {function i(e) {var a = {};for (var t in e) {if (e.hasOwnProperty(t)) {var r = e[t];var n = null;switch (t) {case "colorSpace":n = [ "<enumerated>", [ "colorSpace", r ] ];break;case "depth":n = [ "<integer>", r ];break;case "documentMode":n = [ "<object>", [ "documentMode", i(r) ] ];break;}if (n) {a[t] = n;}}}return a;}return i({"documentMode": e})["documentMode"];};jamStyles.fromDocumentModeObject = function(e) {return jamEngine.simplifyObject(e);};function p() {var e = {};var a = jamEngine.meaningfulIds;var t = jamEngine.parseFriendly;jamEngine.meaningfulIds = true;jamEngine.parseFriendly = true;var r;r = jamEngine.jsonGet([ [ "property", [ "<property>", "mode" ] ], [ "document", [ "<enumerated>", [ "ordinal", "targetEnum" ] ] ] ]);e["colorSpace"] = r["mode"][1][1];r = jamEngine.jsonGet([ [ "property", [ "<property>", "depth" ] ], [ "document", [ "<enumerated>", [ "ordinal", "targetEnum" ] ] ] ]);e["depth"] = r["depth"][1];jamEngine.meaningfulIds = a;jamEngine.parseFriendly = t;return e;}function f() {var e = jamEngine.meaningfulIds;var a = jamEngine.parseFriendly;jamEngine.meaningfulIds = true;jamEngine.parseFriendly = true;var t = jamEngine.jsonGet([ [ "property", [ "<property>", "resolution" ] ], [ "document", [ "<enumerated>", [ "ordinal", "targetEnum" ] ] ] ]);jamEngine.meaningfulIds = e;jamEngine.parseFriendly = a;return t["resolution"][1][1];}jamStyles.setLayerStyle = function(e, a) {if (e && ("blendOptions" in e || "layerEffects" in e)) {var t = {};if ("blendOptions" in e) {defaultBlendOptionsObj = {"mode": "normal","opacity": 100,"fillOpacity": 100,"channelRestrictions": [],"knockout": "none","blendInterior": false,"blendClipped": true,"transparencyShapesLayer": true,"layerMaskAsGlobalMask": false,"vectorMaskAsGlobalMask": false,"blendRange": []};var r = p();var n;var i;switch (r["colorSpace"]) {case "CMYKColorEnum":case "CMYK64":n = [ "cyan", "magenta", "yellow", "black" ];i = [ "gray", "cyan", "magenta", "yellow", "black" ];break;case "duotone":case "grayScale":case "gray16":n = [ "black" ];i = [ "black" ];break;case "labColor":case "lab48":n = [ "lightness", "a", "b" ];i = [ "lightness", "a", "b" ];break;case "RGBColor":case "RGB48":n = [ "red", "green", "blue" ];i = [ "gray", "red", "green", "blue" ];break;}defaultBlendOptionsObj["channelRestrictions"] = n;for (var o = 0; o < i.length; o++) {defaultBlendRangeObj = {"channel": i[o],"srcBlackMin": 0,"srcBlackMax": 0,"srcWhiteMin": 255,"srcWhiteMax": 255,"destBlackMin": 0,"destBlackMax": 0,"destWhiteMin": 255,"destWhiteMax": 255};defaultBlendOptionsObj["blendRange"].push(defaultBlendRangeObj);}var s = jamUtils.mergeData(e["blendOptions"], defaultBlendOptionsObj);var c = this.toBlendOptionsObject(s)[1][1];for (var l in c) {if (c.hasOwnProperty(l)) {t[l] = c[l];}}}var u;if ("layerEffects" in e) {u = e["layerEffects"];t["layerEffects"] = this.toLayerEffectsObject(u);}jamEngine.jsonPlay("set", {"target": [ "<reference>", [ [ "layer", [ "<enumerated>", [ "ordinal", "targetEnum" ] ] ] ] ],"to": [ "<object>", [ "layer", t ] ]});if (u) {if ("scale" in u && !a) {this.scaleLayerEffects(f() / 72 / (u["scale"] / 100) * 100);}}} else {this.clearLayerStyle();}};function u() {var e = jamEngine.meaningfulIds;var a = jamEngine.parseFriendly;jamEngine.meaningfulIds = true;jamEngine.parseFriendly = true;var t = jamEngine.jsonGet([ [ "property", [ "<property>", "presetManager" ] ], [ "application", [ "<enumerated>", [ "ordinal", "targetEnum" ] ] ] ]);var r = t["presetManager"][1];var n;for (var i = 0; i < r.length; i++) {var o = r[i][1];if (o[0] === "styleClass") {n = o[1]["name"][1].length;break;}}jamEngine.meaningfulIds = e;jamEngine.parseFriendly = a;return n;}function m() {var e = jamEngine.meaningfulIds;var a = jamEngine.parseFriendly;jamEngine.meaningfulIds = true;jamEngine.parseFriendly = true;var t = false;try {var r = jamEngine.jsonGet([ [ "property", [ "<property>", "background" ] ], [ "layer", [ "<enumerated>", [ "ordinal", "targetEnum" ] ] ] ]);t = !r["background"][1];} catch (e) {}var e = jamEngine.meaningfulIds;var a = jamEngine.parseFriendly;return t;}jamStyles.getLayerStyle = function() {var e = null;if (m()) {var a = u();var t = new Date();var r = "Temp-Layer-Style-" + t.getTime();try {jamEngine.jsonPlay("make", {"target": [ "<reference>", [ [ "style", [ "<class>", null ] ] ] ],"name": [ "<string>", r ],"using": [ "<reference>", [ [ "layer", [ "<enumerated>", [ "ordinal", "targetEnum" ] ] ] ] ],"blendOptions": [ "<boolean>", true ],"layerEffects": [ "<boolean>", true ]});} catch (e) {}var n = u();if (n === a + 1) {var i = new File(Folder.temp + "/" + r + ".asl");jamEngine.jsonPlay("set", {"target": [ "<path>", i.fsName ],"to": [ "<list>", [ [ "<reference>", [ [ "style", [ "<index>", n ] ] ] ] ] ]});jamEngine.jsonPlay("delete", {"target": [ "<list>", [ [ "<reference>", [ [ "style", [ "<index>", n ] ] ] ] ] ]});var o = this.dataFromStylesFile(i);if (typeof o === "string") {alert(o + "\n" + "Styles file: " + File.decode(i.name) + "");} else {e = o["styles"][0];if ("name" in e) {delete e["name"];}if ("ID" in e) {delete e["ID"];}if ("documentMode" in e) {delete e["documentMode"];}if ("layerEffects" in e) {var s = e["layerEffects"];if ("masterFXSwitch" in s) {delete s["masterFXSwitch"];}}}if (arguments.length > 0) {var c = arguments[0];if (c && c.constructor === Object) {if ("patterns" in c) {var l = this.patternsFromStylesFile(i);if (typeof l === "string") {alert(l + "\n" + "Styles file: " + File.decode(i.name) + "");} else {c["patterns"] = l;}}}}i.remove();}}return e;};jamStyles.copyLayerStyle = function() {try {jamEngine.jsonPlay("copyEffects", null);} catch (e) {}};jamStyles.pasteLayerStyle = function() {try {jamEngine.jsonPlay("pasteEffects", {});} catch (e) {}};jamStyles.clearLayerStyle = function() {try {jamEngine.jsonPlay("disableLayerStyle", {"target": [ "<reference>", [ [ "layer", [ "<enumerated>", [ "ordinal", "targetEnum" ] ] ] ] ]});} catch (e) {}};jamStyles.applyLayerStyle = function(e, a) {var t = {"target": [ "<reference>", [ [ "style", [ "<name>", e ] ] ] ],"to": [ "<reference>", [ [ "layer", [ "<enumerated>", [ "ordinal", "targetEnum" ] ] ] ] ]};if (typeof a !== "undefined" && a) {t["merge"] = [ "<boolean>", a ];}jamEngine.jsonPlay("applyStyle", t);};jamStyles.scaleLayerEffects = function(e) {jamEngine.jsonPlay("scaleEffectsEvent", {"scale": [ "<unitDouble>", [ "percentUnit", e ] ]});};jamStyles.removeLayerEffect = function(e) {try {jamEngine.jsonPlay("disableSingleFX", {"target": [ "<reference>", [ [ e, [ "<class>", null ] ], [ "layer", [ "<enumerated>", [ "ordinal", "targetEnum" ] ] ] ] ]});} catch (e) {}};jamStyles.removeLayerEffects = function(e) {for (var a = 0; a < e.length; a++) {this.removeLayerEffect(e[a]);}};jamStyles.removeAllLayerEffects = function() {try {jamEngine.jsonPlay("disableLayerFX", {"target": [ "<reference>", [ [ "layer", [ "<enumerated>", [ "ordinal", "targetEnum" ] ] ] ] ]});} catch (e) {}};jamStyles.showHideLayerEffects = function(e, a) {var t = [];for (var r = 0; r < e.length; r++) {t.push([ "<reference>", [ [ e[r], [ "<class>", null ] ], [ "layer", [ "<enumerated>", [ "ordinal", "targetEnum" ] ] ] ] ]);}try {jamEngine.jsonPlay(a ? "show" : "hide", {"target": [ "<list>", t ]}, DialogModes.NO);} catch (e) {}};jamStyles.showHideLayerEffect = function(e, a) {this.showHideLayerEffects([ e ], a);};jamStyles.showHideAllLayerEffects = function(e) {this.showHideLayerEffects([ "layerEffects" ], e);};jamStyles.showHideAllDocumentEffects = function(e) {jamEngine.jsonPlay("set", {"target": [ "<reference>", [ [ "property", [ "<property>", "layerFXVisible" ] ], [ "document", [ "<enumerated>", [ "ordinal", "targetEnum" ] ] ] ] ],"to": [ "<object>", [ "layerFXVisible", {"layerFXVisible": [ "<boolean>", e || false ]} ] ]});};function t(e, a, t) {var r = {"globalLightingAngle": [ "<unitDouble>", [ "angleUnit", a ] ]};if (typeof t !== "undefined") {r["globalAltitude"] = [ "<unitDouble>", [ "angleUnit", t ] ];}jamEngine.jsonPlay("set", {"target": [ "<reference>", [ [ "property", [ "<property>", "globalAngle" ] ], [ e, [ "<enumerated>", [ "ordinal", "targetEnum" ] ] ] ] ],"to": [ "<object>", [ "globalAngle", r ] ]});}jamStyles.setApplicationGlobalAngle = function(e, a) {t("application", e, a);};jamStyles.setDocumentGlobalAngle = function(e, a) {t("document", e, a);};function x(e, a) {var t = e.read(a);var r = 0;for (var n = 0; n < a; n++) {r = (r << 8) + t.charCodeAt(n);}return r;}function E(e) {var a = "";var t = x(e, 4);for (var r = 0; r < t; r++) {var n = x(e, 2);if (n !== 0) {a += String.fromCharCode(n);}}return a;}function l(e, a) {return e.read(a);}function D(e) {var a = x(e, 1);return l(e, a);}jamStyles.dataFromStylesFile = function(e, a) {var t = [ "Bitmap", "Grayscale", "Indexed", "RGB", "CMYK", null, null, "Multichannel", "Duotone", "Lab" ];var r;if (typeof e === "string") {r = new File(e);} else if (e instanceof File) {r = e;}var n;if (r.open("r")) {try {r.encoding = "BINARY";var i;if (this.isStylesPalette(r)) {i = 2;} else if (this.isStylesFile(r)) {i = x(r, 2);}if (i === 2) {var o = r.read(4);if (o === "8BSL") {var s = x(r, 2);if (s === 3) {var c = x(r, 4);var l = r.tell() + c;if (a) {var u = [];while (r.tell() < l) {var p = {};var f = x(r, 4);var m = r.tell() + f;var g = x(r, 4);p["version"] = g;if (g === 1) {p["imageMode"] = t[x(r, 4)];p["height"] = x(r, 2);p["width"] = x(r, 2);p["name"] = E(r);p["ID"] = D(r);} else {p["error"] = "Unsupported version";}u.push(p);r.seek(m + (4 - f % 4) % 4, 0);}}r.seek(l, 0);var y = jamEngine.meaningfulIds;var d = jamEngine.parseFriendly;jamEngine.meaningfulIds = true;jamEngine.parseFriendly = true;var h;var v;var b = [];var k = x(r, 4);for (var T = 0; T < k; T++) {var j = {};var S = x(r, 4);var I = r.tell() + S;h = jamActions.readActionDescriptor(r);v = jamEngine.classIdAndActionDescriptorToJson(0, h)["<descriptor>"];j["name"] = v["name"][1];j["ID"] = v["ID"][1];h = jamActions.readActionDescriptor(r);v = jamEngine.classIdAndActionDescriptorToJson(0, h)["<descriptor>"];if ("documentMode" in v) {j["documentMode"] = this.fromDocumentModeObject(v["documentMode"]);}if ("blendOptions" in v) {j["blendOptions"] = this.fromBlendOptionsObject(v["blendOptions"]);}if ("layerEffects" in v) {j["layerEffects"] = this.fromLayerEffectsObject(v["layerEffects"]);}b.push(j);r.seek(I, 0);}jamEngine.meaningfulIds = y;jamEngine.parseFriendly = d;n = {};if (a) {n["patterns"] = u;}n["styles"] = b;} else {throw new Error("[jamStyles.dataFromStylesFile] Unrecognized sub-version: " + s);}} else {throw new Error("[jamStyles.dataFromStylesFile] Unrecognized magic number: " + o);}} else {throw new Error("[jamStyles.dataFromStylesFile] Unrecognized format version: " + i);}} catch (e) {n = e.message;} finally {r.close();}} else {n = "[jamStyles.dataFromStylesFile] Cannot open file";}return n;};jamStyles.patternsFromStylesFile = function(e) {var a;if (typeof e === "string") {a = new File(e);} else if (e instanceof File) {a = e;}var t;if (a.open("r")) {try {a.encoding = "BINARY";var r;if (this.isStylesPalette(a)) {r = 2;} else if (this.isStylesFile(a)) {r = x(a, 2);}if (r === 2) {var n = a.read(4);if (n === "8BSL") {var i = x(a, 2);if (i === 3) {var o = x(a, 4);var s = a.tell() + o;var t = [];while (a.tell() < s) {var c = x(a, 4);t.push(l(a, c));a.seek((4 - c % 4) % 4, 1);}} else {throw new Error("[jamStyles.patternsFromStylesFile] Unrecognized sub-version: " + i);}} else {throw new Error("[jamStyles.patternsFromStylesFile] Unrecognized magic number: " + n);}} else {throw new Error("[jamStyles.patternsFromStylesFile] Unrecognized format version: " + r);}} catch (e) {t = e.message;} finally {a.close();}} else {t = "[jamStyles.patternsFromStylesFile] Cannot open file";}return t;};jamStyles.patternsFileFromPatterns = function(e, a) {var t;if (typeof e === "string") {t = new File(e);} else if (e instanceof File) {t = e;}if (t.open("w", "8BPT", "8BIM")) {t.encoding = "BINARY";t.write("8BPT");t.write("\0");var r = a.length;t.write(String.fromCharCode(r >> 24 & 255, r >> 16 & 255, r >> 8 & 255, r & 255));for (var n = 0; n < r; n++) {t.write(a[n]);}t.close();}};})();}if (typeof jamUtils !== "object") {var jamUtils = {};(function() {jamUtils.toDistanceUnit = function(e, a) {return e / a * 72;};jamUtils.fromDistanceUnit = function(e, a) {return e / 72 * a;};jamUtils.fontExists = function(e) {var a = true;var t = false;if (a) {for (var r = 0; r < app.fonts.length; r++) {if (app.fonts[r].postScriptName === e) {t = true;break;}}} else {var n = jamEngine.meaningfulIds;var i = jamEngine.parseFriendly;jamEngine.meaningfulIds = true;jamEngine.parseFriendly = true;var o = jamEngine.jsonGet([ [ "property", [ "<property>", "fontList" ] ], [ "application", [ "<enumerated>", [ "ordinal", "targetEnum" ] ] ] ]);var s = o["fontList"][1][1]["fontPostScriptName"][1];for (var r = 0; r < s.length; r++) {if (s[r][1] === e) {t = true;break;}}jamEngine.meaningfulIds = n;jamEngine.parseFriendly = i;}return t;};jamUtils.loadAction = function(e, a, t) {try {jamEngine.jsonGet([ [ "action", [ "<name>", e ] ], [ "actionSet", [ "<name>", a ] ] ]);var r = true;} catch (e) {var r = false;}if (!r) {jamEngine.jsonPlay("open", {"target": [ "<path>", t ]});}};jamUtils.loadActionSet = function(e, a) {try {jamEngine.jsonGet([ [ "actionSet", [ "<name>", e ] ] ]);var t = true;} catch (e) {var t = false;}if (!t) {jamEngine.jsonPlay("open", {"target": [ "<path>", a ]});}};jamUtils.loadPreset = function(e, a, t) {var r = false;var n = true;var i = {"brush": "brush","colors": "color","gradientClassEvent": "gradientClassEvent","style": "styleClass","pattern": "'PttR'","shapingCurve": "shapingCurve","customShape": "customShape","toolPreset": "toolPreset"};var o = i[e];var s = jamEngine.meaningfulIds;var c = jamEngine.parseFriendly;jamEngine.meaningfulIds = true;jamEngine.parseFriendly = true;var l = false;var u = jamEngine.jsonGet([ [ "property", [ "<property>", "presetManager" ] ], [ "application", [ "<enumerated>", [ "ordinal", "targetEnum" ] ] ] ]);var p = u["presetManager"][1];for (var f = 0; f < p.length; f++) {var m = p[f][1];if (m[0] === o) {var g = m[1]["name"][1];for (var y = 0; y < g.length; y++) {if (g[y][1] === a) {l = true;break;}}break;}}if (!l) {if (r) {app.load(new File(t));} else if (n) {jamEngine.jsonPlay("open", {"target": [ "<path>", t ]});} else {jamEngine.jsonPlay("set", {"target": [ "<reference>", [ [ "property", [ "<property>", e ] ], [ "application", [ "<enumerated>", [ "ordinal", "targetEnum" ] ] ] ] ],"to": [ "<path>", t ],"append": [ "<boolean>", true ]});}}jamEngine.meaningfulIds = s;jamEngine.parseFriendly = c;};function r(e) {var a;if (e instanceof File) {a = e;} else if (typeof e === "string") {a = new File(e);} else {throw new Error("[jamUtils getFileObject] Invalid argument");}return a;}jamUtils.readTextFile = function(e) {var a = null;var t = r(e);if (t.open("r")) {a = t.read();t.close();}return a;};jamUtils.readJsonFile = function(e) {return jamJSON.parse(this.readTextFile(e), true);};jamUtils.writeTextFile = function(e, a) {var t = r(e);if (t.open("w", "TEXT")) {t.encoding = "UTF-8";t.lineFeed = "unix";t.write("\ufeff");t.write(a);t.close();}};jamUtils.writeJsonFile = function(e, a, t) {this.writeTextFile(e, jamJSON.stringify(a, t));};jamUtils.cloneData = function(e) {var a;if (e === null) {a = e;} else if (e.constructor === Object) {a = {};for (var t in e) {if (e.hasOwnProperty(t)) {a[t] = this.cloneData(e[t]);}}} else if (e.constructor === Array) {a = [];for (var r = 0; r < e.length; r++) {a.push(this.cloneData(e[r]));}} else {a = e;}return a;};jamUtils.mergeData = function(e, a) {for (var t in a) {if (a.hasOwnProperty(t)) {if (t in e) {if (a[t] !== null && a[t].constructor === Object) {e[t] = this.mergeData(e[t], a[t]);}} else {e[t] = this.cloneData(a[t]);}}}return e;};var o = "jsonCustomOptions";jamUtils.getCustomOptions = function(e, a) {var t = jamEngine.meaningfulIds;var r = jamEngine.parseFriendly;jamEngine.meaningfulIds = true;jamEngine.parseFriendly = false;try {var n = jamEngine.classIdAndActionDescriptorToJson(jamEngine.uniIdStrToId(e), app.getCustomOptions(e));var i = jamJSON.parse(n["<descriptor>"][o]["<string>"], true);} catch (e) {var i = {};}jamEngine.meaningfulIds = t;jamEngine.parseFriendly = r;return this.mergeData(i, a);};jamUtils.putCustomOptions = function(e, a, t) {var r = {};r[o] = [ "<string>", jamJSON.stringify(a) ];app.putCustomOptions(e, jamEngine.jsonToActionDescriptor(r), t);};jamUtils.eraseCustomOptions = function(e) {app.eraseCustomOptions(e);};jamUtils.dataToHexaString = function(e, a) {var t = [ "0", "1", "2", "3", "4", "5", "6", "7", "8", "9", "A", "B", "C", "D", "E", "F" ];var r = "";var n = e.length;for (var i = 0; i < n; i++) {var o = e.charCodeAt(i);if (o >= 0 && o <= 255) {r += t[(o & 240) >> 4] + t[o & 15];} else {throw new Error("[jamUtils.dataToHexaString] Invalid data string");}}if (a) {r = r.toLowerCase();}return r;};jamUtils.hexaToDataString = function(e) {var a = "";var t = e.length;if (t % 2 === 0 && /^[0-9A-Fa-f]*$/.test(e)) {for (var r = 0; r < t; r += 2) {var n = e.slice(r, r + 2);a += String.fromCharCode(parseInt(n, 16));}} else {throw new Error("[jamUtils.hexaToDataString] Invalid hexa string");}return a;};})();}var charID = {"Back": 1113678699,"Background": 1113811815,"Bottom": 1114926957,"By": 1115234336,"Channel": 1130917484,"Contract": 1131312227,"Document": 1147366766,"Expand": 1165521006,"FrameSelect": 1718838636,"Horizontal": 1215461998,"Layer": 1283027488,"Left": 1281713780,"Move": 1836021349,"None": 1315925605,"Null": 1853189228,"Offset": 1332114292,"Ordinal": 1332896878,"PixelUnit": 592476268,"Point": 1349415968,"Property": 1349677170,"Right": 1382508660,"Select": 1936483188,"Set": 1936028772,"Size": 1400512544,"Target": 1416783732,"Text": 1417180192,"TextLayer": 1417170034,"TextShapeType": 1413830740,"TextStyle": 1417180243,"TextStyleRange": 1417180276,"To": 1411391520,"Top": 1416589344,"Vertical": 1450341475};function _changeToPointText() {var e = new ActionReference();e.putProperty(charID.Property, charID.TextShapeType);e.putEnumerated(charID.TextLayer, charID.Ordinal, charID.Target);var a = new ActionDescriptor();a.putReference(charID.Null, e);a.putEnumerated(charID.To, charID.TextShapeType, charID.Point);executeAction(charID.Set, a, DialogModes.NO);}function _changeToBoxText() {var e = new ActionReference();e.putProperty(charID.Property, charID.TextShapeType);e.putEnumerated(charID.TextLayer, charID.Ordinal, charID.Target);var a = new ActionDescriptor();a.putReference(charID.Null, e);a.putEnumerated(charID.To, charID.TextShapeType, stringIDToTypeID("box"));executeAction(charID.Set, a, DialogModes.NO);}function _layerIsTextLayer() {var e = _getCurrent(charID.Layer, charID.Text);return e.hasKey(charID.Text);}function _textLayerIsPointText() {var e = _getCurrent(charID.Layer, charID.Text).getObjectValue(charID.Text);var a = e.getList(stringIDToTypeID("textShape")).getObjectValue(0).getEnumerationValue(charID.TextShapeType);return a === charID.Point;}function _convertPixelToPoint(e) {return parseInt(e) / activeDocument.resolution * 72;}function _createCurrent(e, a) {var t = new ActionReference();if (a > 0) t.putProperty(charID.Property, a);t.putEnumerated(e, charID.Ordinal, charID.Target);return t;}function _getCurrent(e, a) {return executeActionGet(_createCurrent(e, a));}function _deselect() {var e = new ActionReference();e.putProperty(charID.Channel, charID.FrameSelect);var a = new ActionDescriptor();a.putReference(charID.Null, e);a.putEnumerated(charID.To, charID.Ordinal, charID.None);executeAction(charID.Set, a, DialogModes.NO);}function _getBoundsFromDescriptor(e) {var a = e.getInteger(charID.Top);var t = e.getInteger(charID.Left);var r = e.getInteger(charID.Right);var n = e.getInteger(charID.Bottom);return {"top": a,"left": t,"right": r,"bottom": n,"width": r - t,"height": n - a,"xMid": (t + r) / 2,"yMid": (a + n) / 2};}function _getCurrentSelectionBounds() {var e = _getCurrent(charID.Document, charID.FrameSelect);if (e.hasKey(charID.FrameSelect)) {var a = e.getObjectValue(charID.FrameSelect);return _getBoundsFromDescriptor(a);}}function _getCurrentTextLayerBounds() {var e = stringIDToTypeID("bounds");var a = _getCurrent(charID.Layer, e).getObjectValue(e);return _getBoundsFromDescriptor(a);}function _modifySelectionBounds(e) {if (e == 0) return;var a = new ActionDescriptor();a.putUnitDouble(charID.By, charID.PixelUnit, Math.abs(e));executeAction(e > 0 ? charID.Expand : charID.Contract, a, DialogModes.NO);}function _moveLayer(e, a) {var t = new ActionDescriptor();t.putUnitDouble(charID.Horizontal, charID.PixelUnit, e);t.putUnitDouble(charID.Vertical, charID.PixelUnit, a);var r = new ActionDescriptor();r.putReference(charID.Null, _createCurrent(charID.Layer));r.putObject(charID.To, charID.Offset, t);executeAction(charID.Move, r, DialogModes.NO);}function _createAndSetLayerText(e, a, t) {e.style.textProps.layerText.textKey = e.text.replace(/\n+/g, "");e.style.textProps.layerText.textStyleRange[0].to = e.text.length;e.style.textProps.layerText.paragraphStyleRange[0].to = e.text.length;e.style.textProps.layerText.textShape = [ {"textType": "box","orientation": "horizontal","bounds": {"top": 0,"left": 0,"right": _convertPixelToPoint(a),"bottom": _convertPixelToPoint(t)}} ];jamEngine.jsonPlay("make", {"target": [ "<reference>", [ [ "textLayer", [ "<class>", null ] ] ] ],"using": jamText.toLayerTextObject(e.style.textProps)});}function _setTextBoxSize(e, a) {var t = [ {"textType": "box","orientation": "horizontal","bounds": {"top": 0,"left": 0,"right": _convertPixelToPoint(e),"bottom": _convertPixelToPoint(a)}} ];jamText.setLayerText({"layerText": {"textShape": t}});}function _checkSelection() {var e = _getCurrentSelectionBounds();if (e === undefined) {return {"error": "noSelection"};}_modifySelectionBounds(-10);e = _getCurrentSelectionBounds();if (e === undefined || e.width * e.height < 200) {return {"error": "smallSelection"};}return e;}function _forEachSelectedLayer(e) {var a = [];var t = new ActionReference();var r = stringIDToTypeID("targetLayers");t.putProperty(charID.Property, r);t.putEnumerated(charID.Document, charID.Ordinal, charID.Target);var n = executeActionGet(t);if (n.hasKey(r)) {n = n.getList(r);var i = new ActionReference();i.putProperty(charID.Property, charID.Background);i.putEnumerated(charID.Layer, charID.Ordinal, charID.Back);var o = executeActionGet(i).getBoolean(charID.Background) ? 0 : 1;for (var s = 0; s < n.count; s++) {a.push(n.getReference(s).getIndex() + o);}}if (a.length > 1) {for (var c = 0; c < a.length; c++) {var l = new ActionDescriptor();var u = new ActionReference();u.putIndex(charID.Layer, a[c]);l.putReference(charID.Null, u);executeAction(charID.Select, l, DialogModes.NO);e(a[c]);}var p = new ActionReference();for (var f = 0; f < a.length; f++) {p.putIndex(charID.Layer, a[f]);}var m = new ActionDescriptor();m.putReference(charID.Null, p);executeAction(charID.Select, m, DialogModes.NO);} else if (a.length === 1) {e(a[0]);}}var setActiveLayerTextData;var setActiveLayerTextResult;function _setActiveLayerText() {if (!setActiveLayerTextData) {setActiveLayerTextResult = "";return;} else if (!documents.length) {setActiveLayerTextResult = "doc";return;} else if (!_layerIsTextLayer()) {setActiveLayerTextResult = "layer";return;}var l = setActiveLayerTextData.text;var u = setActiveLayerTextData.style;_forEachSelectedLayer(function() {var e = _getCurrentTextLayerBounds();var a = _textLayerIsPointText();if (a) _changeToBoxText();var t = jamText.getLayerText();var r;if (l && u) {r = u.textProps;r.layerText.textKey = l.replace(/\n+/g, "");r.layerText.textStyleRange[0].to = l.length;r.layerText.paragraphStyleRange[0].to = l.length;} else if (l) {r = {"layerText": {"textKey": l.replace(/\n+/g, "")}};if (t.layerText.textStyleRange && t.layerText.textStyleRange[0]) {r.layerText.textStyleRange = [ t.layerText.textStyleRange[0] ];r.layerText.textStyleRange[0].to = l.length;}if (t.layerText.paragraphStyleRange && t.layerText.paragraphStyleRange[0]) {r.layerText.paragraphStyleRange = [ t.layerText.paragraphStyleRange[0] ];r.layerText.paragraphStyleRange[0].to = l.length;}} else if (u) {var n = t.layerText.textKey || "";r = u.textProps;r.layerText.textStyleRange[0].to = n.length;r.layerText.paragraphStyleRange[0].to = n.length;}r.layerText.textShape = [ t.layerText.textShape[0] ];r.layerText.textShape[0].bounds.bottom *= 15;r.typeUnit = t.typeUnit;jamText.setLayerText(r);var i = _getCurrentTextLayerBounds();if (a) {_changeToPointText();} else {var o = 12;if (u) {o = u.textProps.layerText.textStyleRange[0].textStyle.size;} else if (t.layerText.textStyleRange && t.layerText.textStyleRange[0]) {o = t.layerText.textStyleRange[0].textStyle.size;}r.layerText.textShape[0].bounds.bottom = _convertPixelToPoint(i.height + o + 2);jamText.setLayerText({"layerText": {"textShape": r.layerText.textShape}});}if (!e.bottom) e = i;var s = e.xMid - i.xMid;var c = e.yMid - i.yMid;_moveLayer(s, c);});setActiveLayerTextResult = "";}var createTextLayerInSelectionData;var createTextLayerInSelectionPoint;var createTextLayerInSelectionResult;function _createTextLayerInSelection() {if (!documents.length) {createTextLayerInSelectionResult = "doc";return;}var e = _checkSelection();if (e.error) {createTextLayerInSelectionResult = e.error;return;}var a = e.width * .9;var t = e.height * 15;_createAndSetLayerText(createTextLayerInSelectionData, a, t);var r = _getCurrentTextLayerBounds();if (createTextLayerInSelectionPoint) {_changeToPointText();} else {var n = jamText.getLayerText();var i = n.layerText.textStyleRange[0].textStyle.size;_setTextBoxSize(a, r.height + i + 2);}var o = e.xMid - r.xMid;var s = e.yMid - r.yMid;_moveLayer(o, s);createTextLayerInSelectionResult = "";}var alignTextLayerToSelectionResult;function _alignTextLayerToSelection() {if (!documents.length) {alignTextLayerToSelectionResult = "doc";return;} else if (!_layerIsTextLayer()) {alignTextLayerToSelectionResult = "layer";return;}var e = _checkSelection();if (e.error) {createTextLayerInSelectionResult = e.error;return;}var a = _textLayerIsPointText();var t = e.width * .9;var r = e.height * 15;_setTextBoxSize(t, r);var n = _getCurrentTextLayerBounds();if (a) {_changeToPointText();} else {var i = jamText.getLayerText();var o = i.layerText.textStyleRange[0].textStyle.size;_setTextBoxSize(t, n.height + o + 2);}_deselect();var s = e.xMid - n.xMid;var c = e.yMid - n.yMid;_moveLayer(s, c);alignTextLayerToSelectionResult = "";}var changeActiveLayerTextSizeVal;var changeActiveLayerTextSizeResult;function _changeActiveLayerTextSize() {if (!documents.length) {changeActiveLayerTextSizeResult = "doc";return;} else if (!_layerIsTextLayer()) {changeActiveLayerTextSizeResult = "layer";return;} else if (!changeActiveLayerTextSizeVal) {changeActiveLayerTextSizeResult = "";return;}_forEachSelectedLayer(function() {var e = jamText.getLayerText();var a = e.layerText.textKey.replace(/\n+/g, "");if (!a) {changeActiveLayerTextSizeResult = "layer";return;}var t = _getCurrentTextLayerBounds();var r = _textLayerIsPointText();var n = {"typeUnit": e.typeUnit,"layerText": {"textKey": a,"textGridding": e.textGridding || "none","orientation": e.orientation || "horizontal","antiAlias": e.antiAlias || "antiAliasSmooth","textStyleRange": [ e.layerText.textStyleRange[0] ]}};if (e.layerText.paragraphStyleRange) {var i = e.layerText.paragraphStyleRange[0].paragraphStyle;n.layerText.paragraphStyleRange = [ e.layerText.paragraphStyleRange[0] ];n.layerText.paragraphStyleRange[0].paragraphStyle.textEveryLineComposer = i.textEveryLineComposer || false;n.layerText.paragraphStyleRange[0].paragraphStyle.burasagari = i.burasagari || "burasagariNone";n.layerText.paragraphStyleRange[0].to = a.length;}var o = n.layerText.textStyleRange[0].textStyle.size + changeActiveLayerTextSizeVal;n.layerText.textStyleRange[0].textStyle.size = o;n.layerText.textStyleRange[0].to = a.length;if (!r) {if (changeActiveLayerTextSizeVal > 0) {n.layerText.textShape = [ e.layerText.textShape[0] ];n.layerText.textShape[0].bounds.bottom *= 1.12;n.layerText.textShape[0].bounds.right *= 1.06;}}jamText.setLayerText(n);var s = _getCurrentTextLayerBounds();var c = t.xMid - s.xMid;var l = t.yMid - s.yMid;_moveLayer(c, l);});changeActiveLayerTextSizeResult = "";}function _changeSize_alt() {var m = changeActiveLayerTextSizeVal > 0;_forEachSelectedLayer(function() {var e = new ActionReference();e.putProperty(charID.Property, charID.Text);e.putEnumerated(charID.Layer, charID.Ordinal, charID.Target);var a = executeActionGet(e);if (a.hasKey(charID.Text)) {var t = a.getObjectValue(charID.Text);var r = t.getList(charID.TextStyleRange);var n = [];var i = [];var o = true;for (var s = 0; s < r.count; s++) {var c = r.getObjectValue(s).getObjectValue(charID.TextStyle);n[s] = c.getDouble(charID.Size);i[s] = c.getUnitDoubleType(charID.Size);if (s > 0 && (n[s] !== n[s - 1] || i[s] !== i[s - 1])) {o = false;break;}}var l = .2;if (i[0] === charID.PixelUnit) l = 1; else if (i[0] === 592473716) l = .5;if (!m) l *= -1;if (o) {var u = new ActionDescriptor();var p = new ActionReference();p.putProperty(charID.Property, charID.TextStyle);p.putEnumerated(charID.TextLayer, charID.Ordinal, charID.Target);u.putReference(charID.Null, p);var f = new ActionDescriptor();f.putUnitDouble(charID.Size, i[0], n[0] + l);u.putObject(charID.To, charID.TextStyle, f);executeAction(charID.Set, u, DialogModes.NO);}}});changeActiveLayerTextSizeResult = "";}function nativeAlert(e) {if (!e) return "";alert(e.text, e.title, e.isError);}function nativeConfirm(e) {if (!e) return "";var a = confirm(e.text, false, e.title);return a ? "1" : "";}function getUserFonts() {var e = [];for (var a = 0; a < app.fonts.length; a++) {var t = app.fonts[a];e.push({"name": t.name,"postScriptName": t.postScriptName,"family": t.family,"style": t.style});}return jamJSON.stringify({"fonts": e});}function getHotkeyPressed() {var e = ScriptUI.environment.keyboardState;if (e.metaKey && e.ctrlKey) {return "metaCtrl";} else if (e.metaKey && e.altKey) {return "metaAlt";} else if (e.metaKey && e.shiftKey) {return "metaShift";} else {return "";}}function getActiveLayerText() {if (!documents.length) {return "";} else if (activeDocument.activeLayer.kind != LayerKind.TEXT) {return "";}return jamJSON.stringify({"textProps": jamText.getLayerText()});}function setActiveLayerText(e) {setActiveLayerTextData = e;app.activeDocument.suspendHistory("TyperTools Change", "_setActiveLayerText()");return setActiveLayerTextResult;}function createTextLayerInSelection(e, a) {createTextLayerInSelectionData = e;createTextLayerInSelectionPoint = a;app.activeDocument.suspendHistory("TyperTools Paste", "_createTextLayerInSelection()");return createTextLayerInSelectionResult;}function alignTextLayerToSelection() {app.activeDocument.suspendHistory("TyperTools Align", "_alignTextLayerToSelection()");return alignTextLayerToSelectionResult;}function changeActiveLayerTextSize(e) {changeActiveLayerTextSizeVal = e;app.activeDocument.suspendHistory("TyperTools Resize", "_changeActiveLayerTextSize()");return changeActiveLayerTextSizeResult;}